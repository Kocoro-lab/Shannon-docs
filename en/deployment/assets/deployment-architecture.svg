<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 650">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 600 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
      .group-label { font: 600 12px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="650" fill="#fff"/>

  <!-- Title -->
  <text x="400" y="30" class="title">Deployment Architecture</text>

  <!-- Desktop App -->
  <rect x="320" y="60" width="160" height="40" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="400" y="85" class="box-text">Desktop App</text>

  <!-- Core Services Group -->
  <rect x="50" y="140" width="700" height="190" fill="none" stroke="#666" stroke-width="1.5" stroke-dasharray="4 2" rx="4"/>
  <text x="70" y="160" class="group-label">Core Services</text>

  <!-- Gateway -->
  <rect x="320" y="180" width="160" height="50" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="400" y="200" class="box-text-sm">Gateway</text>
  <text x="400" y="215" class="label">:8080</text>

  <!-- Row 1: Orchestrator, Agent Core, LLM Service -->
  <rect x="80" y="260" width="130" height="50" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="145" y="278" class="box-text-sm">Orchestrator</text>
  <text x="145" y="293" class="label">:50052</text>

  <rect x="240" y="260" width="130" height="50" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="305" y="278" class="box-text-sm">Agent Core</text>
  <text x="305" y="293" class="label">:50051</text>

  <rect x="400" y="260" width="130" height="50" fill="#99f6e4" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="465" y="278" class="box-text-sm">LLM Service</text>
  <text x="465" y="293" class="label">:8000</text>

  <!-- Temporal -->
  <rect x="560" y="260" width="130" height="50" fill="#e5e7eb" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="625" y="278" class="box-text-sm">Temporal</text>
  <text x="625" y="293" class="label">:7233</text>

  <!-- Data Stores Group -->
  <rect x="50" y="360" width="700" height="180" fill="none" stroke="#666" stroke-width="1.5" stroke-dasharray="4 2" rx="4"/>
  <text x="70" y="380" class="group-label">Data Stores</text>

  <!-- PostgreSQL -->
  <rect x="100" y="410" width="130" height="110" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="165" y="455" class="box-text-sm">PostgreSQL</text>
  <text x="165" y="470" class="label">:5432</text>
  <text x="118" y="490" class="label">Task metadata</text>
  <text x="118" y="502" class="label">Events</text>
  <text x="118" y="514" class="label">Sessions</text>

  <!-- Redis -->
  <rect x="260" y="410" width="130" height="110" fill="#fbcfe8" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="325" y="455" class="box-text-sm">Redis</text>
  <text x="325" y="470" class="label">:6379</text>
  <text x="278" y="490" class="label">Caching</text>
  <text x="278" y="502" class="label">Pub/Sub</text>
  <text x="278" y="514" class="label">Sessions</text>

  <!-- Qdrant -->
  <rect x="420" y="410" width="130" height="110" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="485" y="455" class="box-text-sm">Qdrant</text>
  <text x="485" y="470" class="label">:6333</text>
  <text x="438" y="490" class="label">Embeddings</text>
  <text x="438" y="502" class="label">Semantic</text>
  <text x="438" y="514" class="label">memory</text>

  <!-- Scaling notes -->
  <text x="70" y="575" class="label">Horizontal (stateless)</text>
  <line x1="70" y1="578" x2="530" y2="578" stroke="#666" stroke-width="1"/>

  <text x="625" y="575" class="label">Vertical + replicas</text>
  <line x1="590" y1="578" x2="730" y2="578" stroke="#666" stroke-width="1"/>

  <text x="70" y="605" class="box-text-sm">Scale: Gateway, Orchestrator, Agent, LLM</text>
  <text x="605" y="605" class="box-text-sm">Scale: PostgreSQL, Redis, Qdrant</text>

  <!-- Arrows -->
  <!-- Desktop to Gateway -->
  <line x1="400" y1="100" x2="400" y2="175" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Gateway to services -->
  <line x1="320" y1="205" x2="205" y2="255" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Orchestrator to others -->
  <line x1="145" y1="310" x2="305" y2="310" stroke="#666" stroke-width="1.5"/>
  <line x1="305" y1="310" x2="305" y2="255" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="145" y1="310" x2="465" y2="310" stroke="#666" stroke-width="1.5"/>
  <line x1="465" y1="310" x2="465" y2="255" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="210" y1="285" x2="555" y2="285" stroke="#666" stroke-width="1.5"/>
  <line x1="625" y1="285" x2="625" y2="255" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Orchestrator to databases -->
  <line x1="145" y1="310" x2="145" y2="380" stroke="#666" stroke-width="1.5"/>
  <line x1="145" y1="380" x2="165" y2="405" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="145" y1="380" x2="325" y2="405" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Agent Core to Qdrant -->
  <line x1="305" y1="310" x2="305" y2="380" stroke="#666" stroke-width="1.5"/>
  <line x1="305" y1="380" x2="485" y2="405" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
</svg>
