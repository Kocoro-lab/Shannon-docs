<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 600 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'Menlo', sans-serif; fill: #1a1a1a; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <rect width="900" height="650" fill="#fff"/>

  <text x="450" y="30" class="title">Workflow Selection Logic</text>

  <!-- Query Input -->
  <rect x="380" y="50" width="140" height="40" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="450" y="75" class="box-text">Query Input</text>

  <line x1="450" y1="90" x2="450" y2="115" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Pre-Route Decision -->
  <path d="M 390 120 L 510 120 L 530 145 L 510 170 L 390 170 L 370 145 Z" fill="#e0e7ff" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="450" y="149" class="box-text-sm">Pre-Route Check</text>

  <!-- Swarm branch (left) -->
  <line x1="370" y1="145" x2="160" y2="145" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="265" y="140" class="label">force_swarm: true</text>

  <rect x="60" y="125" width="100" height="40" fill="#c4b5fd" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="110" y="142" class="box-text-sm">Swarm</text>
  <text x="110" y="155" class="label">Workflow</text>

  <!-- Supervisor branch (right) -->
  <line x1="530" y1="145" x2="740" y2="145" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="635" y="140" class="label">mode: supervisor</text>

  <rect x="740" y="125" width="110" height="40" fill="#c4b5fd" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="795" y="142" class="box-text-sm">Supervisor</text>
  <text x="795" y="155" class="label">Workflow</text>

  <!-- Auto path continues down -->
  <line x1="450" y1="170" x2="450" y2="200" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="475" y="190" class="label">auto</text>

  <!-- Decompose & Analyze -->
  <rect x="360" y="205" width="180" height="40" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="450" y="230" class="box-text">Decompose & Analyze</text>

  <line x1="450" y1="245" x2="450" y2="275" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Complexity Score -->
  <path d="M 390 280 L 510 280 L 530 305 L 510 330 L 390 330 L 370 305 Z" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="450" y="309" class="box-text-sm">Complexity Score</text>

  <!-- Left Branch: Simple Task -->
  <line x1="370" y1="305" x2="200" y2="375" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="270" y="342" class="label">＜ 0.3</text>

  <rect x="130" y="380" width="140" height="40" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="200" y="405" class="box-text-sm">ExecuteSimpleTask</text>

  <!-- Right Branch: Cognitive Strategy -->
  <line x1="530" y1="305" x2="660" y2="375" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="610" y="342" class="label">≥ 0.3</text>

  <path d="M 590 380 L 730 380 L 750 405 L 730 430 L 590 430 L 570 405 Z" fill="#fed7aa" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="660" y="409" class="box-text-sm">Cognitive Strategy</text>

  <!-- Strategy outputs -->
  <rect x="60" y="530" width="130" height="40" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="125" y="547" class="box-text-sm">Exploratory</text>
  <text x="125" y="560" class="label">Workflow</text>

  <rect x="210" y="530" width="130" height="40" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="275" y="547" class="box-text-sm">Scientific</text>
  <text x="275" y="560" class="label">Workflow</text>

  <rect x="360" y="530" width="130" height="40" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="425" y="547" class="box-text-sm">React</text>
  <text x="425" y="560" class="label">Workflow</text>

  <rect x="510" y="530" width="130" height="40" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="575" y="547" class="box-text-sm">Research</text>
  <text x="575" y="560" class="label">Workflow</text>

  <rect x="660" y="530" width="130" height="40" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="725" y="547" class="box-text-sm">DAG</text>
  <text x="725" y="560" class="label">Workflow</text>

  <!-- Arrows from Cognitive Strategy to workflows -->
  <line x1="570" y1="405" x2="125" y2="525" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="330" y="470" class="label">exploratory</text>

  <line x1="590" y1="420" x2="275" y2="525" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="415" y="480" class="label">scientific</text>

  <line x1="620" y1="430" x2="425" y2="525" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="510" y="490" class="label">react</text>

  <line x1="660" y1="430" x2="575" y2="525" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="620" y="490" class="label">research</text>

  <line x1="700" y1="425" x2="725" y2="525" stroke="#666" stroke-width="1.5" stroke-dasharray="5,5" marker-end="url(#arrow)"/>
  <text x="740" y="480" class="label">default</text>

  <!-- Legend -->
  <rect x="60" y="600" width="14" height="14" fill="#c4b5fd" stroke="#1a1a1a" stroke-width="1" rx="2"/>
  <text x="82" y="610" class="label" text-anchor="start">Pre-routed workflows</text>

  <rect x="230" y="600" width="14" height="14" fill="#fde047" stroke="#1a1a1a" stroke-width="1" rx="2"/>
  <text x="252" y="610" class="label" text-anchor="start">Strategy workflows (auto-selected)</text>

  <line x1="480" y1="607" x2="520" y2="607" stroke="#666" stroke-width="1.5" stroke-dasharray="5,5"/>
  <text x="535" y="610" class="label" text-anchor="start">Default fallback</text>
</svg>
