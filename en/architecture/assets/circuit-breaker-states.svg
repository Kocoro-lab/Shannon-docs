<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 400">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 600 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
      .desc-text { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="650" height="400" fill="#fff"/>

  <!-- Title -->
  <text x="325" y="30" class="title">Circuit Breaker States</text>

  <!-- Initial state -->
  <circle cx="325" cy="70" r="10" fill="#1a1a1a"/>

  <!-- Closed state -->
  <rect x="245" y="120" width="160" height="80" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="325" y="153" class="box-text">Closed</text>
  <text x="265" y="175" class="desc-text">Normal operation</text>
  <text x="265" y="188" class="desc-text">All requests allowed</text>

  <!-- Open state -->
  <rect x="50" y="260" width="160" height="80" fill="#fecaca" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="130" y="293" class="box-text">Open</text>
  <text x="70" y="315" class="desc-text">Service unavailable</text>
  <text x="70" y="328" class="desc-text">All requests fail fast</text>

  <!-- Half-Open state -->
  <rect x="440" y="260" width="160" height="80" fill="#fed7aa" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="520" y="293" class="box-text">Half-Open</text>
  <text x="460" y="315" class="desc-text">Testing recovery</text>
  <text x="460" y="328" class="desc-text">Limited requests allowed</text>

  <!-- Initial to Closed -->
  <line x1="325" y1="80" x2="325" y2="115" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Closed to Open -->
  <path d="M 245 160 Q 180 160 180 230 L 180 255" stroke="#666" stroke-width="1.5" fill="none" marker-end="url(#arrow)"/>
  <text x="155" y="195" class="label">Failures â‰¥</text>
  <text x="155" y="207" class="label">threshold</text>

  <!-- Open to Half-Open -->
  <path d="M 210 300 Q 325 300 435 300" stroke="#666" stroke-width="1.5" fill="none" marker-end="url(#arrow)"/>
  <text x="325" y="292" class="label">After recovery timeout</text>

  <!-- Half-Open to Closed -->
  <path d="M 520 260 Q 520 160 410 160" stroke="#666" stroke-width="1.5" fill="none" marker-end="url(#arrow)"/>
  <text x="480" y="180" class="label">Success</text>

  <!-- Half-Open to Open -->
  <path d="M 440 300 Q 325 340 210 300" stroke="#666" stroke-width="1.5" fill="none" marker-end="url(#arrow)"/>
  <text x="325" y="360" class="label">Failure</text>

  <!-- Closed self-loop -->
  <path d="M 405 140 Q 450 120 450 160 Q 450 180 405 180" stroke="#666" stroke-width="1.5" fill="none" marker-end="url(#arrow)"/>
  <text x="470" y="160" class="label">Success</text>
</svg>
