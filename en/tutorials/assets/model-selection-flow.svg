<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 850">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #666; text-anchor: middle; letter-spacing: 0.5px; }
      .box-text { font: 600 13px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 600 11px 'SF Mono', 'Menlo', 'Monaco', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="850" height="850" fill="#fff"/>

  <!-- Title -->
  <text x="425" y="30" class="title">Model Selection Flow</text>

  <!-- Task Submitted -->
  <rect x="345" y="60" width="160" height="40" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="425" y="85" class="box-text">Task Submitted</text>

  <!-- model_override? -->
  <path d="M 345 140 L 505 140 L 525 160 L 505 180 L 345 180 L 325 160 Z" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="425" y="163" class="box-text-sm">model_override?</text>

  <!-- Use Specific Model -->
  <rect x="620" y="140" width="160" height="40" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="700" y="165" class="box-text-sm">Use Specific Model</text>

  <!-- provider_override? -->
  <path d="M 345 240 L 505 240 L 525 260 L 505 280 L 345 280 L 325 260 Z" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="425" y="263" class="box-text-sm">provider_override?</text>

  <!-- Filter by Provider -->
  <rect x="620" y="240" width="160" height="40" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="700" y="265" class="box-text-sm">Filter by Provider</text>

  <!-- model_tier? -->
  <path d="M 345 340 L 505 340 L 525 360 L 505 380 L 345 380 L 325 360 Z" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="425" y="363" class="box-text-sm">model_tier?</text>

  <!-- Use Requested Tier -->
  <rect x="620" y="340" width="160" height="40" fill="#99f6e4" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="700" y="365" class="box-text-sm">Use Requested Tier</text>

  <!-- Analyze Complexity -->
  <rect x="325" y="440" width="200" height="40" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="425" y="465" class="box-text-sm">Analyze Complexity</text>

  <!-- Complexity Score -->
  <path d="M 365 520 L 485 520 L 505 540 L 485 560 L 365 560 L 345 540 Z" fill="#fed7aa" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="425" y="543" class="box-text-sm">Complexity Score</text>

  <!-- Tier branches -->
  <rect x="50" y="620" width="140" height="50" fill="#fbcfe8" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="120" y="638" class="box-text-sm">Small Tier</text>
  <text x="120" y="653" class="label">&lt; 0.3</text>

  <rect x="220" y="620" width="140" height="50" fill="#fbcfe8" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="290" y="638" class="box-text-sm">Medium Tier</text>
  <text x="290" y="653" class="label">0.3 - 0.7</text>

  <rect x="390" y="620" width="140" height="50" fill="#fbcfe8" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="460" y="638" class="box-text-sm">Large Tier</text>
  <text x="460" y="653" class="label">&gt; 0.7</text>

  <!-- Priority Ranking -->
  <rect x="315" y="720" width="220" height="40" fill="#f9a8d4" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="425" y="745" class="box-text-sm">Priority Ranking</text>

  <!-- Select Highest Priority -->
  <rect x="285" y="790" width="280" height="40" fill="#e5e7eb" stroke="#1a1a1a" stroke-width="1.5" rx="4"/>
  <text x="425" y="815" class="box-text-sm">Select Highest Priority Available</text>

  <!-- Arrows -->
  <line x1="425" y1="100" x2="425" y2="135" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Yes to model override -->
  <line x1="525" y1="160" x2="615" y2="160" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="570" y="155" class="label">Yes</text>

  <!-- No to provider check -->
  <line x1="425" y1="180" x2="425" y2="235" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="445" y="210" class="label">No</text>

  <!-- Yes to provider override -->
  <line x1="525" y1="260" x2="615" y2="260" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="570" y="255" class="label">Yes</text>

  <!-- Connect filter to priority -->
  <line x1="700" y1="280" x2="700" y2="700" stroke="#666" stroke-width="1.5"/>
  <line x1="700" y1="700" x2="535" y2="740" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- No to tier check -->
  <line x1="425" y1="280" x2="425" y2="335" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="445" y="310" class="label">No</text>

  <!-- Yes to use tier -->
  <line x1="525" y1="360" x2="615" y2="360" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="570" y="355" class="label">Yes</text>

  <!-- Connect tier to priority -->
  <line x1="700" y1="380" x2="700" y2="680" stroke="#666" stroke-width="1.5"/>
  <line x1="700" y1="680" x2="535" y2="730" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- No to analyze -->
  <line x1="425" y1="380" x2="425" y2="435" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="445" y="410" class="label">No</text>

  <line x1="425" y1="480" x2="425" y2="515" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- To tier branches -->
  <line x1="345" y1="540" x2="120" y2="615" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="395" y1="560" x2="290" y2="615" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="505" y1="540" x2="460" y2="615" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Converge to Priority -->
  <line x1="120" y1="670" x2="315" y2="740" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="290" y1="670" x2="380" y2="715" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="460" y1="670" x2="460" y2="700" stroke="#666" stroke-width="1.5"/>
  <line x1="460" y1="700" x2="425" y2="700" stroke="#666" stroke-width="1.5"/>
  <line x1="425" y1="700" x2="425" y2="715" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="425" y1="760" x2="425" y2="785" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
</svg>
