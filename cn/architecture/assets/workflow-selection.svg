<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'PingFang SC', 'Menlo', monospace; fill: #666; text-anchor: middle; }
      .box-text { font: 600 12px 'SF Mono', 'PingFang SC', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 600 11px 'SF Mono', 'PingFang SC', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
      .annotation { font: 400 9px 'SF Mono', 'PingFang SC', monospace; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <rect width="900" height="650" fill="#fff"/>

  <text x="450" y="30" class="title">工作流选择逻辑</text>
  <text x="450" y="47" class="label">WORKFLOW SELECTION LOGIC</text>

  <!-- Query Input -->
  <rect x="380" y="60" width="140" height="45" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="80" class="box-text">查询输入</text>
  <text x="450" y="95" class="label">Query Input</text>

  <line x1="450" y1="105" x2="450" y2="130" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Pre-Route Decision -->
  <path d="M 390 135 L 510 135 L 530 160 L 510 185 L 390 185 L 370 160 Z" fill="#e0e7ff" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="450" y="157" class="box-text-sm">预路由检查</text>
  <text x="450" y="172" class="annotation">Pre-Route Check</text>

  <!-- Swarm branch (left) -->
  <line x1="370" y1="160" x2="160" y2="160" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="265" y="153" class="annotation">force_swarm: true</text>

  <rect x="60" y="140" width="100" height="40" fill="#c4b5fd" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="110" y="156" class="box-text-sm">Swarm</text>
  <text x="110" y="170" class="label">集群工作流</text>

  <!-- Supervisor branch (right) -->
  <line x1="530" y1="160" x2="740" y2="160" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="635" y="153" class="annotation">mode: supervisor</text>

  <rect x="740" y="140" width="110" height="40" fill="#c4b5fd" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="795" y="156" class="box-text-sm">Supervisor</text>
  <text x="795" y="170" class="label">监督者工作流</text>

  <!-- Auto path continues down -->
  <line x1="450" y1="185" x2="450" y2="215" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="475" y="205" class="annotation">auto 自动</text>

  <!-- Decompose & Analyze -->
  <path d="M 380 220 L 520 220 L 500 260 L 400 260 Z" fill="#e0f2fe" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="450" y="238" class="box-text">分解与分析</text>
  <text x="450" y="253" class="annotation">Decompose & Analyze</text>

  <line x1="450" y1="260" x2="450" y2="290" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Complexity Score -->
  <path d="M 380 295 L 520 295 L 500 335 L 400 335 Z" fill="#fae8ff" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="450" y="313" class="box-text">复杂度评分</text>
  <text x="450" y="328" class="annotation">Complexity Score</text>

  <!-- Branch < 0.3 -->
  <line x1="400" y1="315" x2="150" y2="370" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="280" y="345" class="annotation">＜ 0.3 简单</text>

  <rect x="70" y="375" width="160" height="45" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="150" y="393" class="box-text">ExecuteSimpleTask</text>
  <text x="150" y="408" class="label">直接执行</text>

  <!-- Branch >= 0.3 -->
  <line x1="500" y1="315" x2="700" y2="370" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="600" y="345" class="annotation">≥ 0.3 复杂</text>

  <path d="M 630 375 L 770 375 L 750 415 L 650 415 Z" fill="#fce7f3" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="700" y="393" class="box-text">认知策略</text>
  <text x="700" y="408" class="annotation">Cognitive Strategy</text>

  <!-- Strategy branches -->
  <line x1="650" y1="395" x2="290" y2="470" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="480" y="440" class="annotation">exploratory</text>

  <line x1="670" y1="415" x2="410" y2="500" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="550" y="465" class="annotation">scientific</text>

  <line x1="690" y1="415" x2="560" y2="530" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="640" y="480" class="annotation">react</text>

  <line x1="700" y1="415" x2="700" y2="555" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="730" y="490" class="annotation">research</text>

  <!-- Default branch -->
  <line x1="720" y1="415" x2="410" y2="575" stroke="#666" stroke-width="1.5" stroke-dasharray="5,5" marker-end="url(#arrow)"/>
  <text x="570" y="505" class="annotation">default</text>

  <!-- Workflow boxes -->
  <rect x="220" y="475" width="160" height="40" fill="#bfdbfe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="300" y="493" class="box-text-sm">ExploratoryWorkflow</text>
  <text x="300" y="506" class="label">探索性工作流</text>

  <rect x="340" y="505" width="160" height="40" fill="#c7d2fe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="420" y="523" class="box-text-sm">ScientificWorkflow</text>
  <text x="420" y="536" class="label">科学工作流</text>

  <rect x="500" y="535" width="130" height="40" fill="#ddd6fe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="565" y="553" class="box-text-sm">ReactWorkflow</text>
  <text x="565" y="566" class="label">React工作流</text>

  <rect x="640" y="560" width="150" height="40" fill="#e9d5ff" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="715" y="578" class="box-text-sm">ResearchWorkflow</text>
  <text x="715" y="591" class="label">研究工作流</text>

  <rect x="340" y="580" width="130" height="40" fill="#fed7aa" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="405" y="598" class="box-text-sm">DAGWorkflow</text>
  <text x="405" y="611" class="label">DAG工作流</text>
</svg>
