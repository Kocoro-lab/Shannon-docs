<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 550">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'PingFang SC', 'Menlo', monospace; fill: #666; text-anchor: middle; }
      .box-text { font: 600 13px 'SF Mono', 'PingFang SC', monospace; fill: #1a1a1a; text-anchor: middle; }
      .box-text-sm { font: 600 11px 'SF Mono', 'PingFang SC', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
      .annotation { font: 400 9px 'SF Mono', 'PingFang SC', monospace; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <rect width="800" height="550" fill="#fff"/>

  <text x="400" y="30" class="title">Shannon 系统架构</text>
  <text x="400" y="47" class="label">SHANNON SYSTEM ARCHITECTURE</text>

  <!-- Client -->
  <rect x="340" y="75" width="120" height="50" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="400" y="98" class="box-text">客户端应用</text>
  <text x="400" y="113" class="label">Client Applications</text>

  <line x1="400" y1="125" x2="400" y2="150" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="485" y="140" class="annotation">HTTP/JSON</text>

  <!-- Gateway -->
  <rect x="320" y="155" width="160" height="50" fill="#0070F3" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="400" y="173" class="box-text" fill="#fff">Gateway</text>
  <text x="400" y="185" class="label" fill="#fff">REST API :8080</text>
  <text x="400" y="197" class="label" fill="#fff">Go</text>

  <line x1="400" y1="205" x2="400" y2="230" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="485" y="220" class="annotation">gRPC</text>

  <!-- Orchestrator -->
  <rect x="300" y="235" width="200" height="50" fill="#00A3FF" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="400" y="253" class="box-text" fill="#fff">Orchestrator</text>
  <text x="400" y="265" class="label" fill="#fff">Go gRPC :50052</text>
  <text x="400" y="277" class="label" fill="#fff">Workflow Engine</text>

  <!-- Orchestrator to Agent Core -->
  <line x1="500" y1="260" x2="545" y2="260" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="522" y="253" class="annotation">gRPC</text>

  <!-- Agent Core -->
  <rect x="550" y="235" width="180" height="50" fill="#FF6B6B" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="640" y="253" class="box-text" fill="#fff">Agent Core</text>
  <text x="640" y="265" class="label" fill="#fff">Rust gRPC :50051</text>
  <text x="640" y="277" class="label" fill="#fff">WASI Sandbox</text>

  <!-- Agent Core to LLM -->
  <line x1="640" y1="285" x2="640" y2="315" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="688" y="302" class="annotation">HTTP</text>

  <!-- LLM Service -->
  <rect x="550" y="320" width="180" height="50" fill="#4ECDC4" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="640" y="338" class="box-text" fill="#fff">LLM Service</text>
  <text x="640" y="350" class="label" fill="#fff">Python :8000</text>
  <text x="640" y="362" class="label" fill="#fff">Multi-Provider</text>

  <!-- LLM to Providers -->
  <line x1="640" y1="370" x2="640" y2="400" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Providers -->
  <rect x="530" y="405" width="220" height="45" fill="#e5e7eb" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="640" y="423" class="box-text-sm">LLM 提供商</text>
  <text x="640" y="438" class="label">OpenAI, Anthropic, Google, etc.</text>

  <!-- Orchestrator to Temporal -->
  <line x1="300" y1="260" x2="235" y2="260" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="268" y="253" class="annotation">Workflows</text>

  <!-- Temporal -->
  <rect x="70" y="235" width="160" height="50" fill="#fce7f3" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="150" y="253" class="box-text">Temporal</text>
  <text x="150" y="268" class="label">Workflow Engine</text>

  <!-- Orchestrator to Data Stores -->
  <line x1="400" y1="285" x2="400" y2="315" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Data Stores Group -->
  <rect x="240" y="320" width="320" height="150" fill="#f9fafb" stroke="#999" stroke-width="1" stroke-dasharray="5,5" rx="2"/>
  <text x="400" y="338" class="label">Data Layer</text>

  <!-- PostgreSQL -->
  <ellipse cx="300" cy="385" rx="55" ry="35" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="300" y="380" class="box-text-sm">PostgreSQL</text>
  <text x="300" y="395" class="annotation">State</text>

  <!-- Redis -->
  <ellipse cx="400" cy="385" rx="55" ry="35" fill="#fce7f3" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="400" y="380" class="box-text-sm">Redis</text>
  <text x="400" y="395" class="annotation">Cache</text>

  <!-- Qdrant -->
  <ellipse cx="500" cy="385" rx="55" ry="35" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="500" y="380" class="box-text-sm">Qdrant</text>
  <text x="500" y="395" class="annotation">Vectors</text>

  <line x1="340" y1="330" x2="290" y2="355" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="380" y1="330" x2="400" y2="355" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>
  <line x1="420" y1="330" x2="500" y2="355" stroke="#666" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- Legend -->
  <text x="50" y="490" class="label" text-anchor="start">组件类型 Component Types:</text>

  <rect x="50" y="500" width="60" height="14" fill="#0070F3" stroke="#1a1a1a" stroke-width="1"/>
  <text x="115" y="507" class="annotation" text-anchor="start" dominant-baseline="middle">API Layer</text>

  <rect x="190" y="500" width="60" height="14" fill="#FF6B6B" stroke="#1a1a1a" stroke-width="1"/>
  <text x="255" y="507" class="annotation" text-anchor="start" dominant-baseline="middle">Execution</text>

  <rect x="330" y="500" width="60" height="14" fill="#4ECDC4" stroke="#1a1a1a" stroke-width="1"/>
  <text x="395" y="507" class="annotation" text-anchor="start" dominant-baseline="middle">LLM Gateway</text>

  <rect x="470" y="500" width="60" height="14" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1"/>
  <text x="535" y="507" class="annotation" text-anchor="start" dominant-baseline="middle">Data Store</text>

  <rect x="610" y="500" width="60" height="14" fill="#fce7f3" stroke="#1a1a1a" stroke-width="1"/>
  <text x="675" y="507" class="annotation" text-anchor="start" dominant-baseline="middle">Orchestration</text>
</svg>
