<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 820">
  <defs>
    <style>
      .title { font: 700 17px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #0f172a; }
      .title-sub { font: 400 13px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #94a3b8; }
      .tag { font: 700 9.5px -apple-system, 'Inter', sans-serif; fill: #fff; letter-spacing: 0.6px; text-transform: uppercase; }
      .box-text { font: 600 13px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #1e293b; text-anchor: middle; }
      .box-text-sm { font: 600 11px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #1e293b; text-anchor: middle; }
      .sub { font: 400 10px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #64748b; text-anchor: middle; }
      .tech { font: 400 9.5px -apple-system, 'Inter', sans-serif; fill: #94a3b8; text-anchor: middle; }
      .metric { font: 600 9.5px -apple-system, 'Inter', sans-serif; fill: #0d9488; text-anchor: middle; }
      .spectrum-text { font: 500 10.5px -apple-system, 'Inter', sans-serif; fill: #64748b; text-anchor: middle; }
      .spectrum-label { font: 400 8.5px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #94a3b8; text-anchor: middle; }
      .spectrum-title { font: 600 9px -apple-system, 'Inter', sans-serif; fill: #94a3b8; letter-spacing: 0.5px; text-transform: uppercase; text-anchor: end; }
      .sec-title { font: 600 9px -apple-system, 'Inter', sans-serif; fill: #94a3b8; letter-spacing: 0.5px; text-transform: uppercase; }
      .sec-text { font: 400 9.5px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #64748b; text-anchor: middle; }
      .sec-sub { font: 400 7.5px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #94a3b8; text-anchor: middle; }
      .infra-label { font: 500 9px 'SF Mono', 'Menlo', monospace; fill: #94a3b8; letter-spacing: 0.4px; }
      .legend-text { font: 400 10px -apple-system, 'PingFang SC', 'Inter', sans-serif; fill: #94a3b8; }
    </style>
    <marker id="ah" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#94a3b8"/>
    </marker>
    <marker id="ah-signal" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#0d9488"/>
    </marker>
    <marker id="ah-state" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#059669"/>
    </marker>
  </defs>

  <rect width="1440" height="820" fill="#ffffff" rx="12"/>

  <!-- Title -->
  <text x="40" y="40" class="title">Shannon</text>
  <text x="122" y="40" class="title-sub">开源平台架构</text>

  <!-- Execution Strategy Spectrum -->
  <text x="1400" y="35" class="spectrum-title">执行策略谱系</text>
  <g transform="translate(40, 52)">
    <line x1="0" y1="0" x2="1360" y2="0" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="0" y1="0" x2="0" y2="7" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="272" y1="0" x2="272" y2="7" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="571" y1="0" x2="571" y2="7" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="870" y1="0" x2="870" y2="7" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="1142" y1="0" x2="1142" y2="7" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="1360" y1="0" x2="1360" y2="7" stroke="#e2e8f0" stroke-width="1"/>
    <text x="136" y="20" class="spectrum-text">单代理</text>
    <text x="136" y="33" class="spectrum-label">复杂度 &lt; 0.3</text>
    <text x="421" y="20" class="spectrum-text">DAG</text>
    <text x="421" y="33" class="spectrum-label">扇出 · 扇入</text>
    <text x="720" y="20" class="spectrum-text">ReAct</text>
    <text x="720" y="33" class="spectrum-label">推理 + 工具使用</text>
    <text x="1006" y="20" class="spectrum-text">Research</text>
    <text x="1006" y="33" class="spectrum-label">分层模型 · 成本优化</text>
    <text x="1251" y="20" class="spectrum-text">Swarm</text>
    <text x="1251" y="33" class="spectrum-label">P2P · 自主协作</text>
  </g>

  <!-- Arrows (same as EN) -->
  <line x1="185" y1="188" x2="218" y2="188" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="185" y1="248" x2="218" y2="248" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="185" y1="308" x2="218" y2="308" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="400" y1="235" x2="438" y2="235" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="670" y1="235" x2="708" y2="235" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="905" y1="235" x2="938" y2="235" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="1175" y1="188" x2="1218" y2="188" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="1175" y1="248" x2="1218" y2="248" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="1175" y1="308" x2="1218" y2="308" stroke="#94a3b8" stroke-width="1.5" marker-end="url(#ah)"/>
  <line x1="555" y1="388" x2="555" y2="420" stroke="#0d9488" stroke-width="1.2" stroke-dasharray="6,3" marker-end="url(#ah-signal)"/>
  <line x1="808" y1="358" x2="808" y2="390" stroke="#94a3b8" stroke-width="1.2" marker-end="url(#ah)"/>
  <line x1="1058" y1="388" x2="1058" y2="420" stroke="#94a3b8" stroke-width="1.2" marker-end="url(#ah)"/>
  <path d="M 500 388 L 500 425 Q 500 445, 480 445 L 395 445 Q 375 445, 375 465 L 375 620" stroke="#059669" stroke-width="1.2" stroke-dasharray="4,3" fill="none" marker-end="url(#ah-state)"/>
  <path d="M 555 565 L 555 620" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3,3" fill="none" marker-end="url(#ah)"/>
  <path d="M 808 500 L 808 530 Q 808 545, 790 545 L 745 545 Q 730 545, 730 560 L 730 620" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3,3" fill="none" marker-end="url(#ah)"/>
  <path d="M 1058 565 L 1058 585 Q 1058 600, 1040 600 L 925 600 Q 908 600, 908 615 L 908 620" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3,3" fill="none" marker-end="url(#ah)"/>

  <!-- Client Boxes -->
  <rect x="50" y="164" width="135" height="48" fill="#f0fdfa" stroke="#5eead4" stroke-width="1.5" rx="9"/>
  <text x="117" y="184" class="box-text">Web UI</text>
  <text x="117" y="200" class="tech">React · 仪表盘</text>

  <rect x="50" y="224" width="135" height="48" fill="#f0fdfa" stroke="#5eead4" stroke-width="1.5" rx="9"/>
  <text x="117" y="244" class="box-text">CLI / SDK</text>
  <text x="117" y="260" class="tech">REST · gRPC</text>

  <rect x="50" y="284" width="135" height="48" fill="#f0fdfa" stroke="#5eead4" stroke-width="1.5" rx="9"/>
  <text x="117" y="304" class="box-text">API 客户端</text>
  <text x="117" y="320" class="tech">HTTP · WebSocket</text>

  <!-- API Layer / Gateway Group -->
  <rect x="218" y="130" width="182" height="240" fill="rgba(248,250,252,0.6)" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="6,3" rx="14"/>
  <rect x="232" y="120" width="68" height="20" fill="#2563eb" rx="10"/>
  <text x="266" y="134" class="tag">API Layer</text>

  <rect x="234" y="158" width="150" height="44" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="309" y="176" class="box-text-sm">HTTP 路由器</text>
  <text x="309" y="192" class="sub">路径 · 方法分发</text>

  <rect x="234" y="210" width="150" height="44" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="309" y="228" class="box-text-sm">SSE 流式传输</text>
  <text x="309" y="244" class="sub">实时 token 事件</text>

  <rect x="234" y="262" width="150" height="44" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="309" y="280" class="box-text-sm">健康 / 指标</text>
  <text x="309" y="296" class="sub">Prometheus · pprof</text>

  <!-- Orchestration Group -->
  <rect x="438" y="130" width="232" height="260" fill="rgba(248,250,252,0.6)" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="6,3" rx="14"/>
  <rect x="452" y="120" width="68" height="20" fill="#0d9488" rx="10"/>
  <text x="486" y="134" class="tag">编排层</text>

  <rect x="454" y="158" width="200" height="48" fill="#fff" stroke="#14b8a6" stroke-width="1.5" rx="9"/>
  <text x="554" y="178" class="box-text">Temporal 工作流</text>
  <text x="554" y="196" class="metric">确定性重放</text>

  <rect x="454" y="214" width="200" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="554" y="232" class="box-text-sm">复杂度分析器</text>
  <text x="554" y="247" class="sub">按复杂度评分路由</text>

  <rect x="454" y="264" width="200" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="554" y="282" class="box-text-sm">预算管理器</text>
  <text x="554" y="297" class="sub">Token 限制 · 成本追踪</text>

  <rect x="454" y="314" width="200" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="554" y="332" class="box-text-sm">分解器</text>
  <text x="554" y="347" class="sub">任务规划 · 子任务图</text>

  <!-- Enforcement / Agent Core Group -->
  <rect x="708" y="130" width="197" height="230" fill="rgba(248,250,252,0.6)" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="6,3" rx="14"/>
  <rect x="722" y="120" width="68" height="20" fill="#e11d48" rx="10"/>
  <text x="756" y="134" class="tag">执行层</text>

  <rect x="724" y="158" width="165" height="48" fill="#fff" stroke="#fb7185" stroke-width="1.5" rx="9"/>
  <text x="806" y="178" class="box-text">Rust 网关</text>
  <text x="806" y="196" class="metric">零拷贝 gRPC</text>

  <rect x="724" y="214" width="165" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="806" y="232" class="box-text-sm">Token 计数器</text>
  <text x="806" y="247" class="sub">逐请求执行</text>

  <rect x="724" y="264" width="165" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="806" y="282" class="box-text-sm">熔断器</text>
  <text x="806" y="297" class="sub">限流 · 终止开关</text>

  <!-- Inference / LLM Service Group -->
  <rect x="938" y="130" width="237" height="260" fill="rgba(248,250,252,0.6)" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="6,3" rx="14"/>
  <rect x="952" y="120" width="68" height="20" fill="#059669" rx="10"/>
  <text x="986" y="134" class="tag">推理层</text>

  <rect x="954" y="158" width="205" height="48" fill="#fff" stroke="#34d399" stroke-width="1.5" rx="9"/>
  <text x="1056" y="178" class="box-text">提供商路由器</text>
  <text x="1056" y="194" class="sub">Anthropic · OpenAI · Google</text>

  <rect x="954" y="214" width="205" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1056" y="232" class="box-text-sm">代理循环</text>
  <text x="1056" y="247" class="sub">多轮 · 上下文窗口</text>

  <rect x="954" y="264" width="205" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1056" y="282" class="box-text-sm">工具执行器</text>
  <text x="1056" y="297" class="sub">函数调用 · MCP</text>

  <rect x="954" y="314" width="205" height="42" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1056" y="332" class="box-text-sm">上下文管理器</text>
  <text x="1056" y="347" class="sub">分层历史 · 裁剪</text>

  <!-- Provider Boxes -->
  <rect x="1218" y="164" width="160" height="48" fill="#f0fdfa" stroke="#5eead4" stroke-width="1.5" rx="9"/>
  <text x="1298" y="184" class="box-text">Anthropic API</text>
  <text x="1298" y="200" class="tech">Claude · 流式</text>

  <rect x="1218" y="224" width="160" height="48" fill="#f0fdfa" stroke="#5eead4" stroke-width="1.5" rx="9"/>
  <text x="1298" y="244" class="box-text">OpenAI API</text>
  <text x="1298" y="260" class="tech">GPT · 嵌入</text>

  <rect x="1218" y="284" width="160" height="48" fill="#f0fdfa" stroke="#5eead4" stroke-width="1.5" rx="9"/>
  <text x="1298" y="304" class="box-text">Google AI</text>
  <text x="1298" y="320" class="tech">Gemini · Vertex</text>

  <!-- Strategies Group -->
  <rect x="438" y="420" width="232" height="148" fill="rgba(248,250,252,0.6)" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="6,3" rx="14"/>
  <rect x="452" y="410" width="68" height="20" fill="#ca8a04" rx="10"/>
  <text x="486" y="424" class="tag">策略</text>

  <rect x="454" y="446" width="100" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="504" y="462" class="box-text-sm">DAG</text>
  <text x="504" y="475" class="tech">并行</text>

  <rect x="562" y="446" width="100" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="612" y="462" class="box-text-sm">ReAct</text>
  <text x="612" y="475" class="tech">推理 + 行动</text>

  <rect x="454" y="490" width="100" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="504" y="506" class="box-text-sm">Research</text>
  <text x="504" y="519" class="tech">分层模型</text>

  <rect x="562" y="490" width="100" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="612" y="506" class="box-text-sm">探索性</text>
  <text x="612" y="519" class="tech">思维树</text>

  <rect x="454" y="534" width="100" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="504" y="550" class="box-text-sm">科学式</text>
  <text x="504" y="563" class="tech">假设检验</text>

  <rect x="562" y="534" width="100" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="612" y="550" class="box-text-sm">Swarm</text>
  <text x="612" y="563" class="tech">P2P 代理</text>

  <!-- Sandbox Group -->
  <rect x="708" y="390" width="197" height="112" fill="rgba(248,250,252,0.6)" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="6,3" rx="14"/>
  <rect x="722" y="380" width="68" height="20" fill="#d97706" rx="10"/>
  <text x="756" y="394" class="tag">沙箱</text>

  <rect x="724" y="416" width="165" height="38" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="806" y="433" class="box-text-sm">WASI 运行时</text>
  <text x="806" y="447" class="sub">文件系统隔离</text>

  <rect x="724" y="460" width="165" height="38" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="806" y="477" class="box-text-sm">会话工作区</text>
  <text x="806" y="491" class="sub">按会话 · 配额</text>

  <!-- Tools Group -->
  <rect x="938" y="420" width="237" height="148" fill="rgba(248,250,252,0.6)" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="6,3" rx="14"/>
  <rect x="952" y="410" width="52" height="20" fill="#64748b" rx="10"/>
  <text x="978" y="424" class="tag">工具</text>

  <rect x="954" y="446" width="103" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1005" y="462" class="box-text-sm">web_search</text>
  <text x="1005" y="475" class="tech">SerpAPI</text>

  <rect x="1065" y="446" width="103" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1116" y="462" class="box-text-sm">calculator</text>
  <text x="1116" y="475" class="tech">数学运算</text>

  <rect x="954" y="490" width="103" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1005" y="506" class="box-text-sm">file_ops</text>
  <text x="1005" y="519" class="tech">读写操作</text>

  <rect x="1065" y="490" width="103" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1116" y="506" class="box-text-sm">python_exec</text>
  <text x="1116" y="519" class="tech">WASI 沙箱</text>

  <rect x="954" y="534" width="103" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1005" y="550" class="box-text-sm">web_fetch</text>
  <text x="1005" y="563" class="tech">Jina 阅读器</text>

  <rect x="1065" y="534" width="103" height="36" fill="#f8fafb" stroke="#cbd5e1" stroke-width="1.5" stroke-dasharray="4,3" rx="9"/>
  <text x="1116" y="550" class="box-text-sm">web_crawl</text>
  <text x="1116" y="563" class="tech">网页抓取</text>

  <!-- Infrastructure Row -->
  <rect x="290" y="615" width="710" height="78" fill="rgba(248,250,252,0.5)" stroke="#e2e8f0" stroke-width="1" rx="18"/>
  <text x="305" y="630" class="infra-label">基础设施</text>

  <rect x="310" y="635" width="150" height="48" fill="#f0fdf4" stroke="#a7f3d0" stroke-width="1.5" rx="20"/>
  <text x="385" y="656" class="box-text-sm">Temporal</text>
  <text x="385" y="672" class="sub">工作流引擎</text>

  <rect x="480" y="635" width="150" height="48" fill="#f0fdf4" stroke="#a7f3d0" stroke-width="1.5" rx="20"/>
  <text x="555" y="656" class="box-text-sm">PostgreSQL</text>
  <text x="555" y="672" class="sub">任务 · 会话</text>

  <rect x="650" y="635" width="150" height="48" fill="#f0fdf4" stroke="#a7f3d0" stroke-width="1.5" rx="20"/>
  <text x="725" y="656" class="box-text-sm">Redis</text>
  <text x="725" y="672" class="sub">缓存 · 邮箱</text>

  <rect x="830" y="635" width="150" height="48" fill="#f0fdf4" stroke="#a7f3d0" stroke-width="1.5" rx="20"/>
  <text x="905" y="656" class="box-text-sm">Qdrant</text>
  <text x="905" y="672" class="sub">向量记忆</text>

  <!-- Security Boundary Bar -->
  <g transform="translate(40, 730)">
    <text x="0" y="12" class="sec-title">安全边界</text>
    <line x1="140" y1="7" x2="1400" y2="7" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="140" y1="7" x2="140" y2="12" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="392" y1="7" x2="392" y2="12" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="644" y1="7" x2="644" y2="12" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="946" y1="7" x2="946" y2="12" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="1198" y1="7" x2="1198" y2="12" stroke="#e2e8f0" stroke-width="1"/>
    <line x1="1400" y1="7" x2="1400" y2="12" stroke="#e2e8f0" stroke-width="1"/>
    <text x="266" y="22" class="sec-text">客户端</text>
    <text x="518" y="22" class="sec-text">可选认证</text>
    <text x="518" y="32" class="sec-sub">skip_auth 模式</text>
    <text x="795" y="22" class="sec-text">编排</text>
    <text x="795" y="32" class="sec-sub">预算限制</text>
    <text x="1072" y="22" class="sec-text">执行</text>
    <text x="1072" y="32" class="sec-sub">限流 · 熔断器</text>
    <text x="1299" y="22" class="sec-text">WASI 沙箱</text>
    <text x="1299" y="32" class="sec-sub">文件系统隔离</text>
  </g>

  <!-- Legend -->
  <g transform="translate(1110, 790)">
    <line x1="0" y1="0" x2="28" y2="0" stroke="#94a3b8" stroke-width="1.5"/>
    <text x="36" y="4" class="legend-text">请求流</text>
    <line x1="88" y1="0" x2="116" y2="0" stroke="#0d9488" stroke-width="1.5" stroke-dasharray="6,3"/>
    <text x="124" y="4" class="legend-text">工作流信号</text>
    <line x1="200" y1="0" x2="228" y2="0" stroke="#059669" stroke-width="1.5" stroke-dasharray="4,3"/>
    <text x="236" y="4" class="legend-text">状态 / 持久化</text>
  </g>
</svg>
