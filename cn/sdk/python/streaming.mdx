---
title: "事件流式传输"
description: "使用 Python SDK 进行实时事件流式传输"
---

<Note>
完整的流式传输文档即将推出。目前请参阅[快速入门指南](/cn/sdk/python/quickstart)了解基本的流式传输示例。
</Note>

## 概述

Shannon 提供实时事件流式传输，以便在任务执行时进行监控。

## 基本用法

```python
from shannon import ShannonClient

client = ShannonClient()  # SSE 默认使用 http://localhost:8081

handle = client.submit_task(query="Analyze market trends")

for event in client.stream(handle.workflow_id):
    print(f"[{event.type}] {event.message}")
    if event.type == "TASK_COMPLETED":
        break
```

## 事件类型

常见事件：
- `AGENT_THINKING` - 智能体处理中
- `TASK_DECOMPOSED` - 任务分解为子任务
- `SUBTASK_COMPLETED` - 子任务完成
- `TOOL_INVOKED` - 工具执行
- `TASK_COMPLETED` - 任务完成
- `TASK_FAILED` - 任务失败

## 异步流式传输

```python
import asyncio
from shannon import AsyncShannonClient

async def stream_task():
    async with AsyncShannonClient() as client:
        handle = await client.submit_task(query="Analyze data")

        async for event in client.stream(handle.workflow_id):
            print(f"Event: {event.type}")
            if event.type == "TASK_COMPLETED":
                break

asyncio.run(stream_task())
```

## 进度追踪

从事件中追踪任务进度：

```python
total_subtasks = 0
completed_subtasks = 0

for event in client.stream(workflow_id):
    if event.type == 'TASK_DECOMPOSED':
        total_subtasks = event.data['subtasks']

    elif event.type == 'SUBTASK_COMPLETED':
        completed_subtasks += 1
        progress = (completed_subtasks / total_subtasks) * 100
        print(f"Progress: {progress:.1f}%")
```

## 更多示例

更多流式传输示例，请参阅：
- [SDK 快速入门](/cn/sdk/python/quickstart)
- [流式传输概念](/cn/quickstart/concepts/streaming)
- [API 流式传输端点](/cn/api/endpoints/stream-task)

## 下一步

<CardGroup cols={2}>
  <Card title="异步使用" icon="bolt" href="/cn/sdk/python/async-usage">
    异步/等待模式
  </Card>
  <Card title="示例" icon="code" href="/cn/sdk/python/examples">
    更多代码示例
  </Card>
</CardGroup>
