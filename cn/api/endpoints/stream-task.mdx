---
title: "流式传输任务事件"
description: "GET /api/v1/tasks/{id}/stream - 实时任务事件流式传输"
---

<Note>
本文档正在扩充中。基本的流式传输信息如下。
</Note>

## 端点

```
GET /api/v1/tasks/{task_id}/stream
```

使用 Server-Sent Events (SSE) 在任务执行时流式传输实时事件。

## 请求

### 路径参数

| 参数 | 类型 | 必需 | 描述 |
|-----------|------|----------|-------------|
| `task_id` | string | 是 | 任务标识符 |

### 请求头

| 请求头 | 必需 | 描述 |
|--------|----------|-------------|
| `X-API-Key` | 条件性 | API 密钥（启用认证时） |

## 响应

Server-Sent Events 流，包含实时更新。

## 事件类型

| 事件 | 描述 |
|-------|-------------|
| `AGENT_THINKING` | 智能体正在处理 |
| `TASK_DECOMPOSED` | 任务分解为子任务 |
| `SUBTASK_STARTED` | 子任务开始执行 |
| `SUBTASK_COMPLETED` | 子任务完成 |
| `TOOL_INVOKED` | 工具执行开始 |
| `TOOL_RESULT` | 工具返回结果 |
| `TASK_COMPLETED` | 整个任务完成 |
| `TASK_FAILED` | 任务遇到错误 |

## 示例

### 使用 cURL

```bash
curl -N http://localhost:8080/api/v1/tasks/task-dev-1730000000/stream
```

### 使用 Python SDK

```python
from shannon import ShannonClient

client = ShannonClient()

for event in client.stream(workflow_id):
    print(f"[{event.type}] {event.message}")
    if event.type == "TASK_COMPLETED":
        break
```

### 事件流示例

```
event: AGENT_THINKING
data: {"message":"Analyzing task complexity..."}

event: TASK_DECOMPOSED
data: {"subtasks":3,"strategy":"DAG"}

event: SUBTASK_STARTED
data: {"subtask_id":"1","query":"Research topic"}

event: SUBTASK_COMPLETED
data: {"subtask_id":"1","status":"COMPLETED"}

event: TASK_COMPLETED
data: {"result":"Final result","metrics":{"latency_ms":5000}}
```

## 更多信息

有关详细的流式传输文档，请参阅：
- [流式传输概念](/cn/quickstart/concepts/streaming)
- [Python SDK 流式传输](/cn/sdk/python/quickstart)

## 下一步

<CardGroup cols={2}>
  <Card title="取消任务" icon="xmark" href="/cn/api/endpoints/cancel-task">
    取消运行中的任务
  </Card>
  <Card title="会话" icon="comments" href="/cn/api/endpoints/sessions">
    会话管理
  </Card>
</CardGroup>
