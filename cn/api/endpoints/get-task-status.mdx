---
title: "Get Task Status"
description: "GET /api/v1/tasks/{id} - Retrieve task status"
---

> ğŸš§ **ç¿»è¯‘è¿›è¡Œä¸­** - æ­¤æ–‡æ¡£æ­£åœ¨ä»è‹±æ–‡ç¿»è¯‘ä¸ºä¸­æ–‡

**åŸæ–‡ä»¶**: `api/endpoints/get-task-status.mdx`
**è‹±æ–‡ç‰ˆæœ¬**: [æŸ¥çœ‹è‹±æ–‡æ–‡æ¡£](/en/api/endpoints/get-task-status)

---


## Endpoint

```
GET /api/v1/tasks/{task_id}
```

Retrieve the current status of a task.

## Request

### Path Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `task_id` | string | Yes | Task identifier from submit response |

### Headers

| Header | Required | Description |
|--------|----------|-------------|
| `X-API-Key` | Conditional | API key (when auth enabled) |

## Response

### Success (200 OK)

<CodeGroup>

```json Running Task
{
  "task_id": "task-dev-1730000000",
  "status": "TASK_STATUS_RUNNING",
  "response": null,
  "error": "",
  "query": "Analyze the sentiment of this text",
  "session_id": "sess-123",
  "mode": "EXECUTION_MODE_STANDARD",
  "created_at": "2024-10-22T10:30:00Z",
  "updated_at": "2024-10-22T10:30:15Z"
}
```

```json Completed Task
{
  "task_id": "task-dev-1730000000",
  "status": "TASK_STATUS_COMPLETED",
  "response": {
    "result": "The sentiment is overwhelmingly positive..."
  },
  "error": "",
  "query": "Analyze the sentiment of this text",
  "session_id": "sess-123",
  "mode": "EXECUTION_MODE_STANDARD",
  "created_at": "2024-10-22T10:30:00Z",
  "updated_at": "2024-10-22T10:30:25Z"
}
```

```json Failed Task
{
  "task_id": "task-dev-1730000000",
  "status": "TASK_STATUS_FAILED",
  "response": null,
  "error": "Budget exceeded",
  "query": "Analyze the sentiment of this text",
  "session_id": "sess-123",
  "mode": "EXECUTION_MODE_STANDARD",
  "created_at": "2024-10-22T10:30:00Z",
  "updated_at": "2024-10-22T10:30:12Z"
}
```

</CodeGroup>

### Error Responses

| Status | Error Code | Description |
|--------|------------|-------------|
| 404 | `TASK_NOT_FOUND` | Task ID doesn't exist |
| 401 | `UNAUTHORIZED` | Invalid or missing API key |

## Examples

### Basic Status Check

<CodeGroup>

```bash cURL
curl http://localhost:8080/api/v1/tasks/task-dev-1730000000
```

```python Python SDK
from shannon import ShannonClient

client = ShannonClient()

status = client.get_status("task-dev-1730000000")
print("Status:", status.status)
if status.status == status.status.COMPLETED:
    print("Result:", status.result)
```

```javascript JavaScript (fetch)
const response = await fetch('http://localhost:8080/api/v1/tasks/task-dev-1730000000');
const task = await response.json();
console.log('Status:', task.status);
if (task.status === 'TASK_STATUS_COMPLETED') {
  console.log('Response:', task.response);
}
```

</CodeGroup>

### Poll Until Complete

<CodeGroup>

```python Python SDK
import time

handle = client.submit_task(query="Analyze data")

while True:
    status = client.get_status(handle.task_id)
    print("Status:", status.status)
    if status.status in [status.status.COMPLETED, status.status.FAILED]:
        break
    time.sleep(2)

if status.status == status.status.COMPLETED:
    print("Result:", status.result)
else:
    print("Error:", status.error_message)
```

```bash Shell Script
#!/bin/bash

TASK_ID="task-dev-1730000000"

while true; do
  STATUS=$(curl -s http://localhost:8080/api/v1/tasks/$TASK_ID | jq -r '.status')

  echo "Status: $STATUS"

  if [ "$STATUS" = "COMPLETED" ] || [ "$STATUS" = "FAILED" ]; then
    break
  fi

  sleep 2
done

# Get final response payload
curl http://localhost:8080/api/v1/tasks/$TASK_ID | jq '.response'
```

</CodeGroup>

### Wait for Completion (SDK)

```python
handle = client.submit_task(query="Complex analysis")
final = client.wait(handle.task_id, timeout=300)
print("Result:", final.result)
```

## Response Fields

### Task Status

| Field | Type | Description |
|-------|------|-------------|
| `task_id` | string | Unique task identifier |
| `status` | string | `TASK_STATUS_*` |
| `response` | object\|null | Result JSON (when completed) |
| `error` | string | Error message (when failed) |
| `query` | string | Original query text |
| `session_id` | string | Session ID |
| `mode` | string | Execution mode (enum string) |

<Note>
The REST status response does not include detailed metrics. Use the dashboard, streaming events, or the gRPC API/SDK for metrics.
</Note>

## Task Status Values

| Status | Description |
|--------|-------------|
| `QUEUED` | Task waiting to be executed |
| `RUNNING` | Task currently executing |
| `COMPLETED` | Task finished successfully |
| `FAILED` | Task encountered an error |
| `CANCELLED` | Task was cancelled by user |

## Progress Tracking

Progress is calculated based on subtask completion:

```python
progress = completed_subtasks / total_subtasks
```

For simple mode (no decomposition):
- `0.0` - Not started
- `0.5` - In progress
- `1.0` - Complete

## Best Practices

### 1. Use SDK's wait helper

```python
# âœ… Good: SDK handles polling
result = client.wait(handle.task_id, timeout=300)

# âŒ Avoid: Manual polling
while True:
    status = client.get_status(task_id)
    if status.status == "COMPLETED":
        break
    time.sleep(1)
```

### 2. Check for Errors

```python
status = client.get_status(task_id)

if status.status == "FAILED":
    print(f"Error: {status.error.code}")
    print(f"Message: {status.error.message}")

    if status.error.code == "BUDGET_EXCEEDED":
        print("Increase budget or simplify task")
```

### 3. Monitor Token Usage

```python
if status.status == "COMPLETED":
    tokens = status.metrics.token_usage.total_tokens
    cost = status.metrics.token_usage.cost_usd

    if cost > 1.0:
        print(f"Warning: High cost (${cost:.2f})")
```

### 4. Use Streaming for Long Tasks

For tasks that take > 30 seconds, use streaming instead:

```python
# Instead of polling
for event in client.stream(workflow_id):
    if event.type == "TASK_COMPLETED":
        break
```

## Common Error Codes

| Error Code | Description | Solution |
|------------|-------------|----------|
| `BUDGET_EXCEEDED` | Token/cost limit reached | Increase budget or simplify task |
| `TIMEOUT` | Execution timeout | Increase timeout_seconds |
| `LLM_ERROR` | LLM provider error | Check API keys, retry |
| `POLICY_VIOLATION` | OPA policy denied | Check permissions |
| `INVALID_STATE` | Task in invalid state | Check task status |

## Next Steps

<CardGroup cols={2}>
  <Card title="Stream Events" icon="stream" href="/api/endpoints/stream-task">
    Monitor tasks in real-time
  </Card>
  <Card title="Cancel Task" icon="xmark" href="/api/endpoints/cancel-task">
    Cancel (via SDK / gRPC)
  </Card>
  <Card title="Python SDK" icon="python" href="/sdk/python/quickstart">
    SDK usage
  </Card>
  <Card title="API Overview" icon="code" href="/api/overview">
    Endpoints and usage
  </Card>
</CardGroup>


---

## å‚ä¸ç¿»è¯‘

å¦‚æœæ‚¨æƒ³å¸®åŠ©ç¿»è¯‘æ­¤æ–‡æ¡£ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„ [GitHub ä»“åº“](https://github.com/Kocoro-lab/Shannon)ã€‚
