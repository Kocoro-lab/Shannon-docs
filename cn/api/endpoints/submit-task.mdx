---
title: "Submit Task"
description: "POST /api/v1/tasks - Submit a task for agent execution"
---

> üöß **ÁøªËØëËøõË°å‰∏≠** - Ê≠§ÊñáÊ°£Ê≠£Âú®‰ªéËã±ÊñáÁøªËØë‰∏∫‰∏≠Êñá

**ÂéüÊñá‰ª∂**: `api/endpoints/submit-task.mdx`
**Ëã±ÊñáÁâàÊú¨**: [Êü•ÁúãËã±ÊñáÊñáÊ°£](/en/api/endpoints/submit-task)

---


## Endpoint

```
POST /api/v1/tasks
```

Submit a new task to Shannon for AI agent execution. The task will be executed and monitored; advanced configuration (budgets, modes) is handled internally and not exposed via REST yet.

## Request

### Headers

| Header | Required | Description |
|--------|----------|-------------|
| `Content-Type` | Yes | `application/json` |
| `X-API-Key` | Conditional | API key (when auth enabled) |
| `Idempotency-Key` | No | Unique key to prevent duplicate execution |

### Body Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `query` | string | Yes | The task description or question |
| `session_id` | string | No | Session ID for multi‚Äëturn conversations (auto‚Äëgenerated if omitted) |
| `context` | object | No | Additional context data |

<Note>
Budget limits, explicit modes, and cognitive strategy selection are managed by the platform. These controls are not yet configurable via the REST request body.
</Note>

## Response

### Success (200 OK)

```json
{
  "task_id": "task-dev-1730000000",
  "status": "TASK_STATUS_RUNNING",
  "message": "Task submitted",
  "created_at": "2024-10-22T10:30:00Z"
}

Response headers include:
- `X-Workflow-ID`: the workflow ID associated with the task
- `X-Session-ID`: the session ID used for the task
```

### Error Responses

| Status | Error Code | Description |
|--------|------------|-------------|
| 400 | `INVALID_REQUEST` | Missing or invalid parameters |
| 401 | `UNAUTHORIZED` | Invalid or missing API key |
| 429 | `RATE_LIMIT_EXCEEDED` | Too many requests |
| 500 | `INTERNAL_ERROR` | Server error |

## Examples

### Simple Query

<CodeGroup>

```bash cURL
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "query": "What is the capital of France?"
  }'
```

```python Python SDK
from shannon import ShannonClient

# Use gRPC for submission and Orchestrator admin for SSE (default)
client = ShannonClient()  # grpc: localhost:50052, http: http://localhost:8081

handle = client.submit_task(query="What is the capital of France?")
print("Task ID:", handle.task_id)
```

```javascript JavaScript (fetch)
const response = await fetch('http://localhost:8080/api/v1/tasks', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    query: 'What is the capital of France?'
  })
});

const data = await response.json();
console.log('Task ID:', data.task_id);
```

</CodeGroup>

### Idempotency

<CodeGroup>

```bash cURL
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Idempotency-Key: unique-id-12345" \
  -H "Content-Type: application/json" \
  -d '{"query": "Process payment"}'
```

```python Python SDK
handle = client.submit_task(query="Process payment")
```

</CodeGroup>

### Multi-Turn Conversation

<CodeGroup>

```bash cURL
# First message
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "query": "What is Python?",
    "session_id": "user-123-conv"
  }'

# Follow-up message (Shannon remembers context)
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "query": "What are its main use cases?",
    "session_id": "user-123-conv"
  }'
```

```python Python SDK
session_id = "user-123-conv"

handle1 = client.submit_task(query="What is Python?", session_id=session_id)
handle2 = client.submit_task(query="What are its main use cases?", session_id=session_id)
```

</CodeGroup>

### Complex Task with Custom Context

<Note>
Advanced configuration like execution modes and cognitive strategies are not exposed via the REST API body parameters. The platform intelligently selects the appropriate execution strategy based on query complexity.
</Note>

<CodeGroup>

```bash cURL
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "query": "Compare microservices vs monolithic architecture and provide detailed pros/cons",
    "context": {
      "domain": "software_architecture",
      "detail_level": "comprehensive"
    }
  }'
```

```python Python SDK
# Python SDK supports additional parameters via gRPC
handle = client.submit_task(
    query="Compare microservices vs monolithic architecture",
    context={
        "domain": "software_architecture",
        "detail_level": "comprehensive"
    }
)
```

</CodeGroup>

### With Custom Context

<CodeGroup>

```bash cURL
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "query": "Recommend database for my application",
    "context": {
      "application_type": "e-commerce",
      "expected_traffic": "10k requests/sec",
      "data_size": "100TB"
    }
  }'
```

```python Python SDK
handle = client.submit_task(
    query="Recommend database for my application",
    context={
        "application_type": "e-commerce",
        "expected_traffic": "10k requests/sec",
        "data_size": "100TB"
    }
)
```

</CodeGroup>

### With Idempotency

```bash
# First request
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Idempotency-Key: unique-id-12345" \
  -H "Content-Type: application/json" \
  -d '{"query": "Process payment"}'

# Duplicate request (returns same result, no re-execution)
curl -X POST http://localhost:8080/api/v1/tasks \
  -H "Idempotency-Key: unique-id-12345" \
  -H "Content-Type: application/json" \
  -d '{"query": "Process payment"}'
```

## Execution Modes

### Notes

Execution modes (Simple/Standard/Complex) are selected internally. The REST API does not accept a `mode` parameter at this time.

## Cognitive Strategies

Shannon selects appropriate strategies internally (e.g., direct execution, decomposition, ReAct). Manual selection via REST will be documented when available.

## Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `task_id` | string | Unique task identifier |
| `status` | string | `TASK_STATUS_*` (e.g., `TASK_STATUS_RUNNING`) |
| `created_at` | timestamp | Task creation time |

## Best Practices

### 1. Use Idempotency for Retries

### 2. Use Sessions for Context

```python
session_id = f"user-{user.id}-{conversation.id}"
```

### 3. Provide Rich Context

```python
handle = client.submit_task(
    query="Analyze sales trends",
    context={
        "time_period": "Q4 2024",
        "region": "North America",
        "metrics": ["revenue", "customer_count"]
    }
)
```

### 2. Monitor Task Progress

```python
# Submit task
handle = client.submit_task(query="...")

# Stream events
for event in client.stream(handle.workflow_id):
    print(f"{event.type}: {event.message}")
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Get Task Status" icon="magnifying-glass" href="/cn/api/endpoints/get-task-status">
    Check task execution status
  </Card>
  <Card title="Stream Events" icon="stream" href="/cn/api/endpoints/stream-task">
    Monitor task in real-time
  </Card>
  <Card title="Python SDK" icon="python" href="/cn/sdk/python/quickstart">
    Use the SDK for easier integration
  </Card>
</CardGroup>


---

## ÂèÇ‰∏éÁøªËØë

Â¶ÇÊûúÊÇ®ÊÉ≥Â∏ÆÂä©ÁøªËØëÊ≠§ÊñáÊ°£ÔºåËØ∑ËÆøÈóÆÊàë‰ª¨ÁöÑ [GitHub ‰ªìÂ∫ì](https://github.com/Kocoro-lab/Shannon)„ÄÇ
