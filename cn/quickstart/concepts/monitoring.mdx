---
title: "Monitoring & Observability"
description: "Monitor Shannon task execution and system health"
---

> 🚧 **翻译进行中** - 此文档正在从英文翻译为中文

**原文件**: `quickstart/concepts/monitoring.mdx`
**英文版本**: [查看英文文档](/en/quickstart/concepts/monitoring)

---


<Note>
Monitoring documentation is under development. Core concepts are outlined below.
</Note>

## Overview

Shannon provides comprehensive monitoring and observability features to track task execution, system performance, and resource usage in production environments.

## Monitoring Capabilities

### Task Monitoring

Track individual task execution:
- Execution status and progress
- Resource consumption
- Error rates and types
- Latency metrics
- Cost tracking

### System Monitoring

Monitor Shannon infrastructure:
- Service health status
- API endpoint latency
- Queue depths
- Agent availability
- LLM provider status

## Metrics

### Task Metrics

| Metric | Description | Unit |
|--------|-------------|------|
| `task.latency` | End-to-end task completion time | ms |
| `task.cost` | Total cost per task | USD |
| `task.tokens.input` | Input tokens consumed | count |
| `task.tokens.output` | Output tokens generated | count |
| `task.iterations` | Number of agent iterations | count |
| `task.tools.invocations` | Tool usage count | count |

### System Metrics

| Metric | Description | Unit |
|--------|-------------|------|
| `api.latency` | API response time | ms |
| `api.requests` | Request rate | req/s |
| `api.errors` | Error rate | errors/s |
| `queue.depth` | Tasks waiting | count |
| `agents.active` | Active agent count | count |

## Health Checks

### API Health

```bash
curl http://localhost:8080/health
```

Response:
```json
{
  "status": "healthy",
  "version": "1.0.0",
  "services": {
    "orchestrator": "healthy",
    "agent_core": "healthy",
    "llm_service": "healthy"
  }
}
```

### Component Health

```python
from shannon import ShannonClient

client = ShannonClient()

# Check overall health
health = # Use REST: requests.get("http://localhost:8080/health")
print(f"System status: {health.status}")

# Check specific components
if not health.services.agent_core.healthy:
    print("Agent core is unhealthy!")
```

## Logging

### Log Levels

Shannon uses structured logging with levels:
- `DEBUG` - Detailed diagnostic information
- `INFO` - General operational messages
- `WARN` - Warning conditions
- `ERROR` - Error conditions
- `FATAL` - Critical failures

### Log Format

```json
{
  "timestamp": "2024-10-27T10:00:00Z",
  "level": "INFO",
  "service": "orchestrator",
  "task_id": "task-dev-1730000000",
  "message": "Task submitted",
  "metadata": {
    "mode": "standard",
    "estimated_cost": 0.15
  }
}
```

## Dashboards

### Task Dashboard

Monitor task execution in real-time:
- Active tasks
- Completion rate
- Average latency
- Error rate
- Cost per hour

### System Dashboard

Track system health:
- Service status
- Resource utilization
- Queue lengths
- Provider availability

## Alerting

### Alert Types

Configure alerts for:
- Task failures
- Budget exceeded
- High latency
- Service degradation
- Rate limiting

### Alert Configuration

```yaml
alerts:
  - name: high_error_rate
    condition: error_rate > 0.05
    action: notify
    channels: [email, slack]

  - name: budget_warning
    condition: daily_cost > 100
    action: notify
    channels: [email]

  - name: service_down
    condition: health_check_failed
    action: page
    channels: [pagerduty]
```

## Prometheus Integration

Export metrics to Prometheus:

```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'shannon'
    static_configs:
      - targets: ['localhost:9090']
    metrics_path: '/metrics'
```

### Available Metrics

```
# HELP shannon_task_total Total number of tasks
# TYPE shannon_task_total counter
shannon_task_total{status="completed"} 1234
shannon_task_total{status="failed"} 12

# HELP shannon_task_duration_seconds Task execution duration
# TYPE shannon_task_duration_seconds histogram
shannon_task_duration_seconds_bucket{le="1.0"} 100
shannon_task_duration_seconds_bucket{le="5.0"} 450
```

## Grafana Dashboards

Pre-built Grafana dashboards for:
- Task analytics
- Cost tracking
- Performance monitoring
- Error analysis

## OpenTelemetry

Shannon supports OpenTelemetry for distributed tracing:

```python
from opentelemetry import trace
from shannon import ShannonClient

tracer = trace.get_tracer(__name__)

with tracer.start_as_current_span("analyze_data"):
    client = ShannonClient()
    handle = client.submit_task(query="Analyze dataset")
    result = client.get_status(handle.task_id)
```

## Best Practices

1. **Set up alerts** for critical metrics
2. **Monitor costs** to prevent budget overruns
3. **Track error patterns** to identify issues
4. **Use distributed tracing** for debugging
5. **Archive logs** for compliance
6. **Create custom dashboards** for your use case
7. **Implement SLOs** for reliability

## Debugging

### Enable Debug Logging

```python
import logging
logging.basicConfig(level=logging.DEBUG)

# Now Shannon will output detailed logs
client = ShannonClient()
```

### Trace Requests

```bash
# Enable request tracing
export SHANNON_TRACE=true

# Run with verbose logging
shannon-cli submit "Analyze data" --verbose
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Troubleshooting" icon="wrench" href="/quickstart/troubleshooting">
    Common issues and solutions
  </Card>
  <Card title="Cost Control" icon="dollar" href="/quickstart/concepts/cost-control">
    Manage and optimize costs
  </Card>
</CardGroup>

---

## 参与翻译

如果您想帮助翻译此文档，请访问我们的 [GitHub 仓库](https://github.com/Kocoro-lab/Shannon)。
