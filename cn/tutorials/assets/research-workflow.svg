<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'PingFang SC', monospace; fill: #666; text-anchor: middle; }
      .box-text { font: 600 11px 'SF Mono', 'PingFang SC', monospace; fill: #1a1a1a; text-anchor: middle; }
      .title { font: 700 16px 'SF Mono', 'PingFang SC', sans-serif; fill: #1a1a1a; text-anchor: middle; }
      .annotation { font: 400 9px 'SF Mono', 'PingFang SC', monospace; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <rect width="900" height="650" fill="#fff"/>

  <text x="450" y="30" class="title">研究工作流程</text>
  <text x="450" y="47" class="label">RESEARCH WORKFLOW</text>

  <!-- User Query -->
  <rect x="370" y="80" width="160" height="40" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="103" class="box-text">User Query 用户查询</text>

  <line x1="450" y1="120" x2="450" y2="145" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Memory Retrieval -->
  <rect x="370" y="150" width="160" height="40" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="173" class="box-text">Memory Retrieval 记忆检索</text>

  <line x1="450" y1="190" x2="450" y2="210" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Session check -->
  <path d="M 390 210 L 510 210 L 490 250 L 410 250 Z" fill="#fce7f3" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="450" y="228" class="box-text">Large Context?</text>
  <text x="450" y="241" class="label">上下文过大?</text>

  <line x1="410" y1="230" x2="330" y2="260" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="370" y="248" class="annotation">Yes</text>

  <rect x="250" y="265" width="160" height="35" fill="#e0e7ff" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="330" y="287" class="box-text">Context Compression 压缩</text>

  <line x1="410" y1="283" x2="450" y2="310" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="490" y1="230" x2="570" y2="260" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="530" y="248" class="annotation">No</text>

  <rect x="490" y="265" width="160" height="35" fill="#e0e7ff" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="570" y="287" class="box-text">Query Refinement 细化</text>

  <line x1="490" y1="283" x2="450" y2="310" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Decomposition -->
  <rect x="370" y="315" width="160" height="35" fill="#c7d2fe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="337" class="box-text">Decomposition 分解</text>

  <line x1="450" y1="350" x2="450" y2="375" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Execution Pattern -->
  <path d="M 380 375 L 520 375 L 500 425 L 400 425 Z" fill="#fcd34d" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="450" y="393" class="box-text">Execution Pattern</text>
  <text x="450" y="406" class="label">执行模式选择</text>

  <!-- React -->
  <line x1="400" y1="400" x2="150" y2="450" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="280" y="428" class="annotation">< 0.5</text>

  <rect x="70" y="455" width="160" height="30" fill="#bfdbfe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="150" y="475" class="box-text">React Pattern</text>

  <!-- Parallel -->
  <line x1="430" y1="425" x2="350" y2="455" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="390" y="443" class="annotation">No Deps</text>

  <rect x="270" y="460" width="160" height="30" fill="#a5f3fc" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="350" y="480" class="box-text">Parallel Pattern 并行</text>

  <!-- Hybrid -->
  <line x1="470" y1="425" x2="550" y2="455" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="510" y="443" class="annotation">Has Deps</text>

  <rect x="470" y="460" width="160" height="30" fill="#ddd6fe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="550" y="480" class="box-text">Hybrid Pattern 混合</text>

  <!-- React Per Task -->
  <line x1="500" y1="400" x2="750" y2="450" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="620" y="428" class="annotation">> 0.7 + Deep</text>

  <rect x="670" y="455" width="160" height="30" fill="#e9d5ff" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="750" y="475" class="box-text">React Per Task</text>

  <!-- Converge -->
  <line x1="150" y1="485" x2="430" y2="515" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="350" y1="490" x2="440" y2="515" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="550" y1="490" x2="460" y2="515" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="750" y1="485" x2="470" y2="515" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Entity Filtering -->
  <rect x="370" y="520" width="160" height="30" fill="#fde68a" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="540" class="box-text">Entity Filtering 实体过滤</text>

  <line x1="450" y1="550" x2="450" y2="570" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Citation Collection -->
  <rect x="370" y="575" width="160" height="30" fill="#fef08a" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="595" class="box-text">Citation Collection 引用收集</text>

  <line x1="530" y1="590" x2="630" y2="590" stroke="#666" stroke-width="1.5"/>
  <line x1="630" y1="590" x2="630" y2="520" stroke="#666" stroke-width="1.5"/>
  <line x1="630" y1="520" x2="530" y2="520" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="640" y="560" class="annotation" text-anchor="start">检测缺口 Gap?</text>

  <line x1="450" y1="605" x2="450" y2="620" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Final Output -->
  <rect x="370" y="625" width="160" height="15" fill="#4ECDC4" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="636" class="annotation" fill="#fff">Final Report 最终报告</text>
</svg>
