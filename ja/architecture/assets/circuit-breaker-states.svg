<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #666; text-anchor: middle; }
      .state-text { font: 600 14px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #1a1a1a; text-anchor: middle; dominant-baseline: middle; }
      .desc-text { font: 500 10px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #666; text-anchor: middle; }
      .arrow-label { font: 600 10px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="#fff"/>

  <!-- Start -->
  <circle cx="400" cy="50" r="15" fill="#1a1a1a"/>

  <!-- Closed State -->
  <ellipse cx="200" cy="250" rx="120" ry="80" fill="#bbf7d0" stroke="#16a34a" stroke-width="2"/>
  <text x="200" y="240" class="state-text" fill="#16a34a">Closed</text>
  <text x="200" y="258" class="desc-text">通常の操作</text>
  <text x="200" y="272" class="desc-text">Normal Operation</text>

  <!-- Open State -->
  <ellipse cx="600" cy="250" rx="120" ry="80" fill="#fecaca" stroke="#dc2626" stroke-width="2"/>
  <text x="600" y="240" class="state-text" fill="#dc2626">Open</text>
  <text x="600" y="258" class="desc-text">利用できない</text>
  <text x="600" y="272" class="desc-text">Service Unavailable</text>

  <!-- Half-Open State -->
  <ellipse cx="400" cy="420" rx="120" ry="80" fill="#fed7aa" stroke="#ea580c" stroke-width="2"/>
  <text x="400" y="410" class="state-text" fill="#ea580c">Half-Open</text>
  <text x="400" y="428" class="desc-text">回復をテスト中</text>
  <text x="400" y="442" class="desc-text">Testing Recovery</text>

  <!-- Arrows -->
  <!-- Start to Closed -->
  <line x1="400" y1="65" x2="250" y2="180" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Closed to Open -->
  <path d="M 315 230 Q 400 200 485 230" fill="none" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="400" y="200" class="arrow-label" fill="#dc2626">失敗 >= 閾値</text>
  <text x="400" y="215" class="label" fill="#dc2626">Failures >= Threshold</text>

  <!-- Open to Half-Open -->
  <path d="M 580 330 Q 500 380 440 390" fill="none" stroke="#ea580c" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="530" y="360" class="arrow-label" fill="#ea580c">回復タイムアウト後</text>
  <text x="530" y="375" class="label" fill="#ea580c">After Timeout</text>

  <!-- Half-Open to Closed -->
  <path d="M 280 380 Q 200 350 210 310" fill="none" stroke="#16a34a" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="220" y="360" class="arrow-label" fill="#16a34a">成功 / Success</text>

  <!-- Half-Open to Open -->
  <path d="M 520 400 Q 580 350 590 310" fill="none" stroke="#dc2626" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="570" y="370" class="arrow-label" fill="#dc2626">失敗 / Failure</text>

  <!-- Closed self-loop -->
  <path d="M 140 190 Q 100 200 100 250 Q 100 300 140 310" fill="none" stroke="#16a34a" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="70" y="250" class="desc-text" fill="#16a34a">成功</text>
  <text x="70" y="263" class="desc-text" fill="#16a34a">Success</text>

  <!-- Legend -->
  <rect x="50" y="450" width="700" height="40" fill="none" stroke="#ddd" stroke-width="1" rx="2"/>
  <text x="400" y="475" class="label">サーキットブレーカー状態遷移 / Circuit Breaker State Transitions</text>
</svg>
