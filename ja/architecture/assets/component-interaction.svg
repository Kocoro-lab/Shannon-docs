<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 600">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #666; text-anchor: middle; }
      .box-text { font: 600 12px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #1a1a1a; text-anchor: middle; dominant-baseline: middle; }
      .msg-text { font: 500 9px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #666; text-anchor: middle; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-back" markerWidth="10" markerHeight="7" refX="1" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#999"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="850" height="600" fill="#fff"/>

  <!-- Participants -->
  <!-- Client -->
  <rect x="50" y="30" width="80" height="40" fill="#e0f2fe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="90" y="50" class="box-text">Client</text>
  <line x1="90" y1="70" x2="90" y2="570" stroke="#ddd" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Gateway -->
  <rect x="160" y="30" width="80" height="40" fill="#0070F3" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="200" y="50" class="box-text" fill="#fff">Gateway</text>
  <line x1="200" y1="70" x2="200" y2="570" stroke="#ddd" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Orchestrator -->
  <rect x="270" y="30" width="100" height="40" fill="#00A3FF" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="320" y="50" class="box-text">Orchestrator</text>
  <line x1="320" y1="70" x2="320" y2="570" stroke="#ddd" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- AgentCore -->
  <rect x="400" y="30" width="100" height="40" fill="#FF6B6B" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="50" class="box-text" fill="#fff">AgentCore</text>
  <line x1="450" y1="70" x2="450" y2="570" stroke="#ddd" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- LLMService -->
  <rect x="530" y="30" width="100" height="40" fill="#4ECDC4" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="580" y="50" class="box-text">LLMService</text>
  <line x1="580" y1="70" x2="580" y2="570" stroke="#ddd" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Temporal -->
  <rect x="660" y="30" width="80" height="40" fill="#bfdbfe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="700" y="50" class="box-text">Temporal</text>
  <line x1="700" y1="70" x2="700" y2="570" stroke="#ddd" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Messages -->
  <!-- 1. Client to Gateway -->
  <line x1="90" y1="100" x2="190" y2="100" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="140" y="92" class="msg-text">POST /api/v1/tasks</text>

  <!-- 2. Gateway to Orchestrator -->
  <line x1="200" y1="130" x2="310" y2="130" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="255" y="122" class="msg-text">SubmitTask (gRPC)</text>

  <!-- 3. Orchestrator to Temporal -->
  <line x1="320" y1="160" x2="690" y2="160" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="505" y="152" class="msg-text">StartWorkflow</text>

  <!-- 4. Temporal to Orchestrator -->
  <line x1="690" y1="190" x2="330" y2="190" stroke="#999" stroke-width="1.5" marker-end="url(#arrow-back)"/>
  <text x="510" y="182" class="msg-text">WorkflowStarted</text>

  <!-- 5. Orchestrator to AgentCore -->
  <line x1="320" y1="220" x2="440" y2="220" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="380" y="212" class="msg-text">ExecuteAgent (gRPC)</text>

  <!-- 6. AgentCore to LLMService -->
  <line x1="450" y1="250" x2="570" y2="250" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="510" y="242" class="msg-text">GetCompletion (HTTP)</text>

  <!-- 7. LLMService to AgentCore -->
  <line x1="570" y1="280" x2="460" y2="280" stroke="#999" stroke-width="1.5" marker-end="url(#arrow-back)" stroke-dasharray="3,3"/>
  <text x="515" y="272" class="msg-text">LLM Response</text>

  <!-- 8. AgentCore to Orchestrator -->
  <line x1="440" y1="310" x2="330" y2="310" stroke="#999" stroke-width="1.5" marker-end="url(#arrow-back)" stroke-dasharray="3,3"/>
  <text x="385" y="302" class="msg-text">Agent Result</text>

  <!-- 9. Orchestrator to Gateway -->
  <line x1="310" y1="340" x2="210" y2="340" stroke="#999" stroke-width="1.5" marker-end="url(#arrow-back)" stroke-dasharray="3,3"/>
  <text x="260" y="332" class="msg-text">Task Submitted</text>

  <!-- 10. Gateway to Client -->
  <line x1="190" y1="370" x2="100" y2="370" stroke="#999" stroke-width="1.5" marker-end="url(#arrow-back)" stroke-dasharray="3,3"/>
  <text x="145" y="362" class="msg-text">200 OK + task_id</text>

  <!-- Title -->
  <text x="425" y="580" class="label" font-size="14" font-weight="600">コンポーネント相互作用 / Component Interaction</text>
</svg>
