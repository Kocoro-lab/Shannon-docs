<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <defs>
    <style>
      .label { font: 500 10px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #666; text-anchor: middle; }
      .box-text { font: 600 12px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #1a1a1a; text-anchor: middle; dominant-baseline: middle; }
      .group-title { font: 600 12px 'SF Mono', 'Hiragino Sans', 'Noto Sans JP', sans-serif; fill: #666; text-anchor: start; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="650" fill="#fff"/>

  <!-- Orchestrator (Go) -->
  <rect x="50" y="50" width="800" height="160" fill="none" stroke="#ddd" stroke-width="1" rx="4"/>
  <text x="60" y="70" class="group-title">Orchestrator (Go)</text>

  <rect x="150" y="100" width="120" height="50" fill="#bfdbfe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="210" y="118" class="box-text">Workflow</text>
  <text x="210" y="133" class="label">ワークフロー</text>

  <rect x="320" y="100" width="140" height="50" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="390" y="118" class="box-text">Tool Selection</text>
  <text x="390" y="133" class="label">ツール選択</text>

  <rect x="510" y="100" width="140" height="50" fill="#fef3c7" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="580" y="118" class="box-text">Budget Check</text>
  <text x="580" y="133" class="label">予算チェック</text>

  <rect x="700" y="100" width="120" height="50" fill="#e0f2fe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="760" y="115" class="box-text">Execute Tool</text>
  <text x="760" y="130" class="label">Activity</text>

  <!-- Agent Core (Rust) -->
  <rect x="50" y="240" width="800" height="200" fill="none" stroke="#ddd" stroke-width="1" rx="4"/>
  <text x="60" y="260" class="group-title">Agent Core (Rust)</text>

  <rect x="150" y="290" width="120" height="50" fill="#fecaca" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="210" y="308" class="box-text">Tool Registry</text>
  <text x="210" y="323" class="label">レジストリ</text>

  <path d="M 390 295 L 460 315 L 390 335 L 320 315 Z" fill="#ffedd5" stroke="#1a1a1a" stroke-width="1.5"/>
  <text x="390" y="315" class="box-text">Tool Type?</text>

  <rect x="520" y="290" width="100" height="50" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="570" y="305" class="box-text">Python WASI</text>
  <text x="570" y="320" class="label">Sandbox</text>

  <rect x="640" y="290" width="90" height="50" fill="#dbeafe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="685" y="308" class="box-text">HTTP Client</text>
  <text x="685" y="323" class="label">MCP</text>

  <rect x="520" y="370" width="100" height="50" fill="#e9d5ff" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="570" y="385" class="box-text">OpenAPI</text>
  <text x="570" y="400" class="label">Executor</text>

  <rect x="260" y="370" width="120" height="50" fill="#fde047" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="320" y="388" class="box-text">Circuit Breaker</text>
  <text x="320" y="403" class="label">保護</text>

  <!-- LLM Service (Python) -->
  <rect x="50" y="470" width="800" height="150" fill="none" stroke="#ddd" stroke-width="1" rx="4"/>
  <text x="60" y="490" class="group-title">LLM Service (Python)</text>

  <rect x="180" y="520" width="140" height="60" fill="#4ECDC4" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="250" y="543" class="box-text">Tool</text>
  <text x="250" y="558" class="label">Implementation</text>

  <rect x="380" y="520" width="140" height="60" fill="#a7f3d0" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="450" y="543" class="box-text">Vendor Adapter</text>
  <text x="450" y="558" class="label">アダプター</text>

  <rect x="580" y="520" width="140" height="60" fill="#bfdbfe" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="650" y="543" class="box-text">External API</text>
  <text x="650" y="558" class="label">外部API</text>

  <!-- Result -->
  <rect x="760" y="240" width="90" height="50" fill="#d1fae5" stroke="#1a1a1a" stroke-width="1.5" rx="2"/>
  <text x="805" y="258" class="box-text">Result</text>
  <text x="805" y="273" class="label">結果</text>

  <!-- Arrows -->
  <line x1="270" y1="125" x2="310" y2="125" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="460" y1="125" x2="500" y2="125" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="650" y1="125" x2="690" y2="125" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="760" y1="150" x2="760" y2="220" stroke="#666" stroke-width="1.5"/>
  <line x1="760" y1="220" x2="210" y2="220" stroke="#666" stroke-width="1.5"/>
  <line x1="210" y1="220" x2="210" y2="280" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="270" y1="315" x2="310" y2="315" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Built-in -->
  <line x1="420" y1="300" x2="510" y2="300" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="465" y="292" class="label">Built-in</text>

  <!-- MCP -->
  <line x1="430" y1="315" x2="630" y2="315" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="530" y="307" class="label">MCP</text>

  <!-- OpenAPI -->
  <line x1="410" y1="330" x2="540" y2="365" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="470" y="340" class="label">OpenAPI</text>

  <line x1="570" y1="340" x2="320" y2="365" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="620" y1="320" x2="320" y2="365" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="570" y1="420" x2="320" y2="390" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="320" y1="420" x2="250" y2="510" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="320" y1="550" x2="370" y2="550" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
  <line x1="520" y1="550" x2="570" y2="550" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="320" y1="420" x2="805" y2="240" stroke="#666" stroke-width="1.5"/>
  <line x1="805" y1="240" x2="805" y2="250" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>

  <line x1="805" y1="290" x2="805" y2="150" stroke="#666" stroke-width="1.5"/>
  <line x1="805" y1="150" x2="760" y2="150" stroke="#666" stroke-width="1.5" marker-end="url(#arrow)"/>
</svg>
