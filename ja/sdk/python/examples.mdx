---
title: "ä¾‹"
description: "Shannon Python SDKä½¿ç”¨ä¾‹"
---

<Note>
ã“ã®ä¾‹ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯å¢—åŠ ã—ã¦ã„ã¾ã™ã€‚ä»Šå¾Œã‚‚å®šæœŸçš„ã«ä½¿ç”¨ä¾‹ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚
</Note>

## åŸºæœ¬çš„ãªä¾‹

### ãƒ¢ãƒ‡ãƒ«é¸æŠ

```python
from shannon import ShannonClient

client = ShannonClient(base_url="http://localhost:8080")
handle = client.submit_task(
  "åç›Šãƒˆãƒ¬ãƒ³ãƒ‰ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦æ®µè½ã‚’3ã¤ã®ç®‡æ¡æ›¸ãã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚å‡ºåŠ›å½¢å¼: Markdownãƒªã‚¹ãƒˆã€‚",
  model_tier="small",
  # model_override="gpt-5-nano-2025-08-07",
  # provider_override="openai",
  mode="simple",
)
print(client.wait(handle.task_id).result)
```

### ç°¡å˜ãªè³ªå•å¿œç­”

```python
from shannon import ShannonClient

client = ShannonClient(base_url="http://localhost:8080")

# ç°¡å˜ãªè³ªå•ã‚’ã™ã‚‹
handle = client.submit_task(query="ãƒ•ãƒ©ãƒ³ã‚¹ã®é¦–éƒ½ã¯ã©ã“ã§ã™ã‹ï¼Ÿ")
final = client.wait(handle.task_id)
print(f"å›ç­”: {final.result}")
```

### ãƒ‡ãƒ¼ã‚¿åˆ†æ

```python
from shannon import ShannonClient

client = ShannonClient()

# ç¾å®Ÿçš„ãªãƒ‡ãƒ¼ã‚¿åˆ†æ
handle = client.submit_task(
    query=(
        "ä»¥ä¸‹ã®å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦è¨ˆç®—ã—ã¦ãã ã•ã„:\n"
        "1. è£½å“ã”ã¨ã®ç·åç›Š\n"
        "2. æœˆã”ã¨ã®æˆé•·ç‡\n"
        "3. ç·åç›ŠãŒæœ€ã‚‚é«˜ã„ä¸Šä½3ã¤ã‚’è¿”ã™\n\n"
        "ãƒ‡ãƒ¼ã‚¿:\n"
        "ProductA: 1æœˆ=$10000, 2æœˆ=$12000\n"
        "ProductB: 1æœˆ=$8000, 2æœˆ=$9500\n"
        "ProductC: 1æœˆ=$15000, 2æœˆ=$14000\n"
        "ProductD: 1æœˆ=$5000, 2æœˆ=$6000\n\n"
        "ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: JSONé…åˆ— [{product, revenue, mom_growth_pct}]"
    )
)

result = client.wait(handle.task_id)
print(result.result)
```

## é«˜åº¦ãªä¾‹

### ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```python
"""Shannon SDKã‚’ä½¿ç”¨ã—ãŸãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¾‹"""
from shannon import ShannonClient

def main():
    client = ShannonClient()
    session_id = "quarterly-analysis-demo"

    print("=" * 60)
    print("ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä¾‹")
    print("=" * 60)

    # ã‚¹ãƒ†ãƒƒãƒ—1: åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚¯ã‚¨ãƒª
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 1] Q4ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...")
    h1 = client.submit_task(
        query="1000 + 500 ã¯ã„ãã¤ã§ã™ã‹ï¼Ÿã“ã‚Œã¯Q4ã®åç›Šï¼ˆ1000ï¼‰ã¨è²»ç”¨ï¼ˆ500ï¼‰ã‚’è¡¨ã—ã¾ã™ã€‚",
        session_id=session_id
    )
    result1 = client.wait(h1.task_id)
    print(f"çµæœ: {result1.result}")

    # ã‚¹ãƒ†ãƒƒãƒ—2: å‰ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«åŸºã¥ãåˆ†æ
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 2] ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’åˆ†æä¸­...")
    h2 = client.submit_task(
        query="ã‚ãªãŸãŒè¨ˆç®—ã—ãŸQ4ã®æ•°å­—ã«åŸºã¥ã„ã¦ã€åˆ©ç›Šç‡ã¯ä½•ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆã§ã™ã‹ï¼Ÿ",
        session_id=session_id
    )
    result2 = client.wait(h2.task_id)
    print(f"çµæœ: {result2.result}")

    # ã‚¹ãƒ†ãƒƒãƒ—3: ã™ã¹ã¦ã®å‰ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½¿ç”¨ã—ãŸè¦ç´„
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 3] ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ã‚’ä½œæˆä¸­...")
    h3 = client.submit_task(
        query="Q4ã®è²¡å‹™åˆ†æã‚’2æ–‡ã§è¦ç´„ã—ã¦ãã ã•ã„ã€‚",
        session_id=session_id
    )
    result3 = client.wait(h3.task_id)
    print(f"çµæœ: {result3.result}")

    print("\n" + "=" * 60)
    print("âœ… ãƒãƒ«ãƒã‚¹ãƒ†ãƒƒãƒ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Œäº†ã—ã¾ã—ãŸï¼")
    print(f"ã‚»ãƒƒã‚·ãƒ§ãƒ³ID: {session_id}")
    print("=" * 60)

if __name__ == "__main__":
    main()
```

### ä¸¦åˆ—å‡¦ç†

```python
"""Shannon SDKã‚’ä½¿ç”¨ã—ãŸä¸¦åˆ—å‡¦ç†ã®ä¾‹"""
import asyncio
from shannon import AsyncShannonClient

async def main():
    print("=" * 60)
    print("ä¸¦åˆ—å‡¦ç†ã®ä¾‹")
    print("=" * 60)

    async with AsyncShannonClient() as client:
        # ä¸¦åˆ—å‡¦ç†ã™ã‚‹ãƒˆãƒ”ãƒƒã‚¯
        topics = ["AI", "é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°", "ãƒã‚¤ã‚ªãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼"]

        print(f"\n[ã‚¹ãƒ†ãƒƒãƒ— 1] {len(topics)} ã‚¿ã‚¹ã‚¯ã‚’ä¸¦åˆ—ã§æå‡ºä¸­...")

        # ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’åŒæ™‚ã«æå‡ºï¼ˆãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ï¼‰
        tasks = [
            client.submit_task(
                query=f"{topic}ã®1æ–‡è¦ç´„ã¨ãã®ä¸»ãªå¿œç”¨ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚"
            )
            for topic in topics
        ]

        # ã™ã¹ã¦ã®æå‡ºãŒå®Œäº†ã™ã‚‹ã®ã‚’å¾…ã¤
        handles = await asyncio.gather(*tasks)
        print(f"âœ… {len(handles)} ã‚¿ã‚¹ã‚¯ãŒã™ã¹ã¦æå‡ºã•ã‚Œã¾ã—ãŸ")

        print("\n[ã‚¹ãƒ†ãƒƒãƒ— 2] ã™ã¹ã¦ã®çµæœã‚’å¾…æ©Ÿä¸­...")

        # ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ãŒä¸¦åˆ—ã§å®Œäº†ã™ã‚‹ã®ã‚’å¾…ã¤
        results = await asyncio.gather(
            *[client.wait(h.task_id) for h in handles]
        )
        print(f"âœ… {len(results)} ã‚¿ã‚¹ã‚¯ãŒã™ã¹ã¦å®Œäº†ã—ã¾ã—ãŸ")

        print("\n[ã‚¹ãƒ†ãƒƒãƒ— 3] çµæœ:")
        print("-" * 60)

        # çµæœã‚’è¡¨ç¤º
        for topic, result in zip(topics, results):
            print(f"\nğŸ“Œ {topic}:")
            print(f"   {result.result}")

            # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã¯å®‰å…¨ã«ã‚¢ã‚¯ã‚»ã‚¹
            metadata = []
            if hasattr(result, 'metadata') and result.metadata:
                model = result.metadata.get('model_used') or result.metadata.get('model')
                if model:
                    metadata.append(f"ãƒ¢ãƒ‡ãƒ«: {model}")
                tokens = result.metadata.get('total_tokens')
                if tokens:
                    metadata.append(f"ãƒˆãƒ¼ã‚¯ãƒ³: {tokens}")

            if metadata:
                print(f"   ({', '.join(metadata)})")

        print("\n" + "=" * 60)
        print("âœ… ä¸¦åˆ—å‡¦ç†ãŒå®Œäº†ã—ã¾ã—ãŸï¼")
        print(f"{len(topics)} ãƒˆãƒ”ãƒƒã‚¯ã‚’åŒæ™‚ã«å‡¦ç†ã—ã¾ã—ãŸ")
        print("=" * 60)

if __name__ == "__main__":
    asyncio.run(main())
```

### ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°

```python
"""ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä»˜ãã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®ä¾‹"""
from shannon import ShannonClient, EventType

def main():
    print("=" * 60)
    print("ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®ä¾‹")
    print("=" * 60)

    client = ShannonClient()

    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 1] ã‚¿ã‚¹ã‚¯ã‚’é€ä¿¡ä¸­...")
    handle = client.submit_task(
        query=(
            "AWSã€Azureã€GCPã®ä¾¡æ ¼ãƒ¢ãƒ‡ãƒ«ã‚’3æ–‡ã§æ¯”è¼ƒã—ã¦ãã ã•ã„ã€‚ "
            "ç”Ÿæˆã•ã‚Œã‚‹å‡ºåŠ›ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã—ã¾ã™ã€‚"
        )
    )
    print(f"âœ… ã‚¿ã‚¹ã‚¯ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ: {handle.task_id}")

    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 2] ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° [LLM_OUTPUT, WORKFLOW_COMPLETED]...")
    print("-" * 60)

    event_count = 0
    llm_outputs = []

    # LLM_OUTPUT ã¨ WORKFLOW_COMPLETED ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ 
    for event in client.stream(
        handle.workflow_id,
        types=[EventType.LLM_OUTPUT, EventType.WORKFLOW_COMPLETED]
    ):
        event_count += 1
        print(f"[{event_count}] {event.type}")

        if event.type == EventType.LLM_OUTPUT:
            print(f"    ã‚³ãƒ³ãƒ†ãƒ³ãƒ„: {event.message[:80]}...")
            llm_outputs.append(event.message)

        if event.type == EventType.WORKFLOW_COMPLETED:
            print(f"    ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {event.message}")
            break

    print("\n" + "-" * 60)
    print(f"âœ… {event_count} ä»¶ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡")
    print(f"âœ… {len(llm_outputs)} ä»¶ã® LLM å‡ºåŠ›ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£")

    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 3] å®Œå…¨ãªçµæœ:")
    print("-" * 60)
    final = client.wait(handle.task_id)
    print(final.result)

    print("\n" + "=" * 60)
    print("âœ… ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãŒå®Œäº†ã—ã¾ã—ãŸï¼")
    print("=" * 60)

if __name__ == "__main__":
    main()
```

ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã®å®Œå…¨ãªãƒªã‚¹ãƒˆã¯ã€[ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã‚«ã‚¿ãƒ­ã‚°](/ja/api/event-types)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

<Note>
<b>åˆ©ç”¨å¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—</b>

- `LLM_OUTPUT` â€” LLM ã®å¿œç­”
- `LLM_PARTIAL` â€” ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒˆãƒ¼ã‚¯ãƒ³
- `WORKFLOW_COMPLETED` â€” ã‚¿ã‚¹ã‚¯å®Œäº†
- `AGENT_THINKING` â€” ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ¨è«–
- `AGENT_STARTED` â€” ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½œæ¥­ã‚’é–‹å§‹
- `AGENT_COMPLETED` â€” ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå®Œäº†
- `PROGRESS` â€” é€²æ—æ›´æ–°
- `ERROR_OCCURRED` â€” ã‚¨ãƒ©ãƒ¼

<b>ä¸€èˆ¬çš„ãªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</b>

- æœ€çµ‚å‡ºåŠ›ã®ã¿: `types=[EventType.LLM_OUTPUT, EventType.WORKFLOW_COMPLETED]`
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°: `types=[EventType.LLM_PARTIAL, EventType.WORKFLOW_COMPLETED]`
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç›£è¦–: `types=[EventType.AGENT_STARTED, EventType.AGENT_COMPLETED]`
- ã™ã¹ã¦ (ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãªã—): `types=None` (ã¾ãŸã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥)
</Note>

## ã‚¿ã‚¹ã‚¯åˆ¶å¾¡ã®ä¾‹

### é•·æ™‚é–“å®Ÿè¡Œã•ã‚Œã‚‹ã‚¿ã‚¹ã‚¯ã®ä¸€æ™‚åœæ­¢ã¨å†é–‹

```python
"""ã‚¿ã‚¹ã‚¯åˆ¶å¾¡ (ä¸€æ™‚åœæ­¢/å†é–‹) ã®ä¾‹"""
from shannon import ShannonClient
import time

def main():
    print("=" * 60)
    print("ã‚¿ã‚¹ã‚¯åˆ¶å¾¡ (ä¸€æ™‚åœæ­¢/å†é–‹) ã®ä¾‹")
    print("=" * 60)

    client = ShannonClient(base_url="http://localhost:8080")

    # é•·æ™‚é–“å®Ÿè¡Œã•ã‚Œã‚‹ç ”ç©¶ã‚¿ã‚¹ã‚¯ã‚’é€ä¿¡
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 1] é•·æ™‚é–“å®Ÿè¡Œã•ã‚Œã‚‹ã‚¿ã‚¹ã‚¯ã‚’é€ä¿¡ä¸­...")
    handle = client.submit_task(
        query="é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨AIçµ±åˆã®æœ€æ–°ã®é€²å±•ã‚’èª¿æŸ»ã—ã€è©³ç´°ãªåˆ†æã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚"
    )
    print(f"âœ… ã‚¿ã‚¹ã‚¯ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ: {handle.task_id}")

    # å°‘ã—å®Ÿè¡Œã•ã›ã‚‹
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 2] ã‚¿ã‚¹ã‚¯ã‚’5ç§’é–“å®Ÿè¡Œã•ã›ã‚‹...")
    time.sleep(5)

    # ã‚¿ã‚¹ã‚¯ã‚’ä¸€æ™‚åœæ­¢
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 3] ã‚¿ã‚¹ã‚¯ã‚’ä¸€æ™‚åœæ­¢ä¸­...")
    success = client.pause_task(handle.task_id, reason="ä¸­é–“çµæœã®ãƒ¬ãƒ“ãƒ¥ãƒ¼")
    if success:
        print("âœ… ä¸€æ™‚åœæ­¢ä¿¡å·ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ")

    # åˆ¶å¾¡çŠ¶æ…‹ã‚’ç¢ºèª
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 4] åˆ¶å¾¡çŠ¶æ…‹ã‚’ç¢ºèªä¸­...")
    state = client.get_control_state(handle.task_id)
    print(f"ä¸€æ™‚åœæ­¢ä¸­: {state.is_paused}")
    print(f"ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ¸ˆã¿: {state.is_cancelled}")
    if state.paused_at:
        print(f"ä¸€æ™‚åœæ­¢æ™‚åˆ»: {state.paused_at}")
        print(f"ä¸€æ™‚åœæ­¢ç†ç”±: {state.pause_reason}")
        print(f"ä¸€æ™‚åœæ­¢ã—ãŸäºº: {state.paused_by}")

    # å†é–‹å‰ã«å°‘ã—å¾…ã¤
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 5] å†é–‹å‰ã«3ç§’å¾…æ©Ÿä¸­...")
    time.sleep(3)

    # ã‚¿ã‚¹ã‚¯ã‚’å†é–‹
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 6] ã‚¿ã‚¹ã‚¯ã‚’å†é–‹ä¸­...")
    success = client.resume_task(handle.task_id, reason="ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œã«ç¶šè¡Œ")
    if success:
        print("âœ… å†é–‹ä¿¡å·ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ")

    # å®Œäº†ã‚’å¾…ã¤
    print("\n[ã‚¹ãƒ†ãƒƒãƒ— 7] ã‚¿ã‚¹ã‚¯ã®å®Œäº†ã‚’å¾…æ©Ÿä¸­...")
    result = client.wait(handle.task_id)
    print(f"\nâœ… ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸï¼")
    print(f"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {result.status}")
    print(f"\nçµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: {result.result[:200]}...")

    print("\n" + "=" * 60)
    print("âœ… ã‚¿ã‚¹ã‚¯åˆ¶å¾¡ã®ä¾‹ãŒå®Œäº†ã—ã¾ã—ãŸï¼")
    print("=" * 60)

if __name__ == "__main__":
    main()
```

### åˆ¶å¾¡ä¿¡å·ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
"""ä¸€æ™‚åœæ­¢/å†é–‹æ“ä½œã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°"""
from shannon import ShannonClient
from shannon.errors import ShannonError

def main():
    client = ShannonClient()

    task_id = "task-123"

    # ä¸€æ™‚åœæ­¢ã‚’è©¦ã¿ã‚‹
    try:
        client.pause_task(task_id, reason="ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå¿…è¦")
        print("âœ… ã‚¿ã‚¹ã‚¯ãŒæ­£å¸¸ã«ä¸€æ™‚åœæ­¢ã•ã‚Œã¾ã—ãŸ")
    except ShannonError as e:
        # ç‰¹å®šã®ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã‚’å‡¦ç†
        if "å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã‚’ä¸€æ™‚åœæ­¢ã§ãã¾ã›ã‚“" in str(e):
            print("âš ï¸  ã‚¿ã‚¹ã‚¯ã¯ã™ã§ã«å®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€ä¸€æ™‚åœæ­¢ã§ãã¾ã›ã‚“")
        elif "ã‚¿ã‚¹ã‚¯ã¯ã™ã§ã«ä¸€æ™‚åœæ­¢ã—ã¦ã„ã¾ã™" in str(e):
            print("âš ï¸  ã‚¿ã‚¹ã‚¯ã¯ã™ã§ã«ä¸€æ™‚åœæ­¢ã—ã¦ã„ã¾ã™")
        elif "ã‚¿ã‚¹ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“" in str(e):
            print("âŒ ã‚¿ã‚¹ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        else:
            print(f"âŒ ã‚¨ãƒ©ãƒ¼: {e}")

    # å†é–‹ã‚’è©¦ã¿ã‚‹
    try:
        client.resume_task(task_id, reason="å®Ÿè¡Œã‚’ç¶šã‘ã‚‹")
        print("âœ… ã‚¿ã‚¹ã‚¯ãŒæ­£å¸¸ã«å†é–‹ã•ã‚Œã¾ã—ãŸ")
    except ShannonError as e:
        if "ã‚¿ã‚¹ã‚¯ã¯ä¸€æ™‚åœæ­¢ã•ã‚Œã¦ã„ã¾ã›ã‚“" in str(e):
            print("âš ï¸  ã‚¿ã‚¹ã‚¯ã¯ä¸€æ™‚åœæ­¢ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€å†é–‹ã§ãã¾ã›ã‚“")
        elif "å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã‚’å†é–‹ã§ãã¾ã›ã‚“" in str(e):
            print("âš ï¸  ã‚¿ã‚¹ã‚¯ã¯ã™ã§ã«å®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€å†é–‹ã§ãã¾ã›ã‚“")
        else:
            print(f"âŒ ã‚¨ãƒ©ãƒ¼: {e}")

if __name__ == "__main__":
    main()
```

## ã‚¹ã‚¦ã‚©ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰

### ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œã®å¼·åˆ¶

```python
"""ã‚¹ã‚¦ã‚©ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã®ä¾‹ï¼ˆShannon SDKï¼‰"""
from shannon import ShannonClient

client = ShannonClient(base_url="http://localhost:8080")

# ã‚¹ã‚¦ã‚©ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã§é€ä¿¡ã—ã€è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é€£æºã•ã›ã‚‹
handle = client.submit_task(
    query="MLãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰å‘ã‘ã®AWSã€Azureã€GCPã‚’èª¿æŸ»ãƒ»æ¯”è¼ƒã—ã¦ãã ã•ã„ã€‚æ–™é‡‘ã€GPUå¯ç”¨æ€§ã€ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã‚«ãƒãƒ¼ã—ã¦ãã ã•ã„ã€‚",
    force_swarm=True,
)

result = client.wait(handle.task_id)
print(result.result)

# ãƒ¢ãƒ‡ãƒ«ã¨ä½¿ç”¨é‡æƒ…å ±ã‚’ç¢ºèª
if result.usage:
    print(f"åˆè¨ˆãƒˆãƒ¼ã‚¯ãƒ³: {result.usage.get('total_tokens')}")
    print(f"ã‚³ã‚¹ãƒˆ: ${result.usage.get('cost_usd', 0):.6f}")
```

## ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ»ã‚¤ãƒ³ãƒ»ã‚¶ãƒ»ãƒ«ãƒ¼ãƒ— ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ä¾‹

### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```python
"""ãƒ’ãƒ¥ãƒ¼ãƒãƒ³ãƒ»ã‚¤ãƒ³ãƒ»ã‚¶ãƒ»ãƒ«ãƒ¼ãƒ— ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ä¾‹"""
from shannon import ShannonClient

client = ShannonClient(base_url="http://localhost:8080")

# ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå¿…è¦ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒã™ã§ã«å®Ÿè¡Œä¸­ã§ã‚ã‚‹ã¨ä»®å®š
workflow_id = "workflow-123"

# ç¾åœ¨ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹ã‚’ç¢ºèª
state = client.get_review_state(workflow_id)
print(f"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {state.status}")
print(f"ãƒ©ã‚¦ãƒ³ãƒ‰: {state.round}, ãƒãƒ¼ã‚¸ãƒ§ãƒ³: {state.version}")

if state.current_plan:
    print(f"ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³:\n{state.current_plan}")

# ä¼šè©±å±¥æ­´ã‚’è¡¨ç¤º
for r in state.rounds:
    print(f"  [{r.role}] {r.message}")

# ã¾ã ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã®å ´åˆã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æä¾›
if state.status == "reviewing":
    updated = client.submit_review_feedback(
        workflow_id,
        "å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚",
        version=state.version,
    )
    print(f"ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚ç¾åœ¨ã®ãƒ©ã‚¦ãƒ³ãƒ‰: {updated.round}")

    # æ›´æ–°ã•ã‚ŒãŸãƒ—ãƒ©ãƒ³ã‚’æ‰¿èª
    result = client.approve_review(workflow_id, version=updated.version)
    print(f"æ‰¿èªæ¸ˆã¿: {result['status']}")
```

### æ¥½è¦³çš„åŒæ™‚å®Ÿè¡Œåˆ¶å¾¡ã‚’ä½¿ç”¨ã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼

```python
"""ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç«¶åˆã®å‡¦ç†"""
from shannon import ShannonClient, ValidationError

client = ShannonClient()

workflow_id = "workflow-456"

try:
    state = client.get_review_state(workflow_id)
    updated = client.submit_review_feedback(
        workflow_id,
        "å…¨ä½“çš„ã«è‰¯ã„ã§ã™ãŒã€äº›ç´°ãªã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚",
        version=state.version,
    )
    client.approve_review(workflow_id, version=updated.version)
except ValidationError as e:
    if "409" in str(e.code):
        print("ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç«¶åˆ: åˆ¥ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å¤‰æ›´ã—ã¾ã—ãŸã€‚æ›´æ–°ã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚")
    else:
        raise
```

## ã‚¹ã‚­ãƒ«ã®ä¾‹

### ã‚¹ã‚­ãƒ«ã®é–²è¦§ã¨ç¢ºèª

```python
"""ã‚¹ã‚­ãƒ«é–²è¦§ã®ä¾‹"""
from shannon import ShannonClient

client = ShannonClient(base_url="http://localhost:8080")

# åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®ã‚¹ã‚­ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º
skills = client.list_skills()
print(f"{len(skills)} å€‹ã®ã‚¹ã‚­ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ:\n")
for s in skills:
    flag = " [å±é™º]" if s.dangerous else ""
    status = "æœ‰åŠ¹" if s.enabled else "ç„¡åŠ¹"
    print(f"  {s.name} v{s.version} ({s.category}) - {status}{flag}")
    print(f"    {s.description}")

# ã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
print("\n--- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚­ãƒ« ---")
coding = client.list_skills(category="coding")
for s in coding:
    print(f"  {s.name}: {s.description}")

# è©³ç´°æƒ…å ±ã‚’å–å¾—
detail = client.get_skill("web_search")
print(f"\nã‚¹ã‚­ãƒ«è©³ç´°: {detail.name} v{detail.version}")
print(f"  è‘—è€…: {detail.author}")
print(f"  å¿…è¦ãªãƒ„ãƒ¼ãƒ«: {detail.requires_tools}")
print(f"  å¿…è¦ãªãƒ­ãƒ¼ãƒ«: {detail.requires_role}")
print(f"  æœ€å¤§ãƒã‚¸ã‚§ãƒƒãƒˆ: {detail.budget_max}")

# ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ã‚’å–å¾—
versions = client.get_skill_versions("web_search")
print(f"\nweb_search ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³:")
for v in versions:
    print(f"  v{v.version} - {v.description}")
```

## ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã®ä¾‹

### ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¿ã‚¹ã‚¯ã®ä½œæˆã¨ç®¡ç†

```python
"""ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã®ä¾‹"""
from shannon import ShannonClient

client = ShannonClient(base_url="http://localhost:8080")

# å¹³æ—¥ã®æ¯æœ9æ™‚ï¼ˆUTCï¼‰ã«å®Ÿè¡Œã•ã‚Œã‚‹èª¿æŸ»ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ
result = client.create_schedule(
    name="ãƒ‡ã‚¤ãƒªãƒ¼AIãƒ‹ãƒ¥ãƒ¼ã‚¹",
    cron_expression="0 9 * * 1-5",
    task_query="æœ€æ–°ã®AIç ”ç©¶ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è¦ç´„ã—ã¦ãã ã•ã„",
    task_context={"force_research": "true", "research_strategy": "quick"},
    timezone="UTC",
    max_budget_per_run_usd=0.50,
)
schedule_id = result["schedule_id"]
print(f"ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒä½œæˆã•ã‚Œã¾ã—ãŸ: {schedule_id}")

# ã™ã¹ã¦ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º
schedules, total = client.list_schedules()
print(f"\n{total} å€‹ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«:")
for s in schedules:
    print(f"  {s.name}: {s.cron_expression} ({s.status})")
    print(f"    å®Ÿè¡Œå›æ•°: åˆè¨ˆ {s.total_runs}, æˆåŠŸ {s.successful_runs}, å¤±æ•— {s.failed_runs}")

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è©³ç´°ã‚’å–å¾—
sched = client.get_schedule(schedule_id)
print(f"\nã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«: {sched.name}")
print(f"  æ¬¡å›å®Ÿè¡Œ: {sched.next_run_at}")
print(f"  å‰å›å®Ÿè¡Œ: {sched.last_run_at}")

# å®Ÿè¡Œå±¥æ­´ã‚’è¡¨ç¤º
runs, _ = client.get_schedule_runs(schedule_id)
for run in runs:
    print(f"  {run.triggered_at}: {run.status} - ${run.total_cost_usd:.4f}")

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä¸€æ™‚åœæ­¢ï¼ˆä¾‹: ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­ï¼‰
client.pause_schedule(schedule_id, reason="ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦")

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å†é–‹
client.resume_schedule(schedule_id)

# ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šã‚’æ›´æ–°
client.update_schedule(
    schedule_id,
    cron_expression="0 8 * * 1-5",  # 8æ™‚ã«å¤‰æ›´
    max_budget_per_run_usd=0.75,
)

# ä¸è¦ã«ãªã£ãŸã‚‰å‰Šé™¤
# client.delete_schedule(schedule_id)
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¾‹

å®Œå…¨ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ãƒ•ãƒ«ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã®ä¾‹ã«ã¤ã„ã¦ã¯ã€å°‚ç”¨ãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„: [ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](/ja/sdk/python/error-handling)ã€‚

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

<CardGroup cols={2}>
  <Card title="Async Usage" icon="bolt" href="/ja/sdk/python/async-usage">
    Async/await ãƒ‘ã‚¿ãƒ¼ãƒ³
  </Card>
  <Card title="Error Handling" icon="shield" href="/ja/sdk/python/error-handling">
    ã‚¨ãƒ©ãƒ¼ã‚’é©åˆ‡ã«å‡¦ç†ã™ã‚‹
  </Card>
</CardGroup>
